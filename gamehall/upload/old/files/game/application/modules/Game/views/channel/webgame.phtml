<!DOCTYPE html>
<html lang="en">
<head>
	<?php $this->title="火爆网游";$this->hasSearch="true"; ?>
	<meta charset="UTF-8">
	<title>游戏大厅</title>
	<?php echo $this->render("layout/cssInc.phtml");?>
</head>
<body>
	<?php echo $this->render("layout/header.phtml");?>
	<div id="roll" class="roll">
		  
	</div>
	<div id="container">
		
    </div>
	<div id="footer"></div>
</body>
<?php echo $this->render("layout/scriptInc.phtml");?>
<script src="<?php echo "$appJs/sys/touchSwipe.js$timestamp";?>"></script>
<script src="<?php echo "$appJs/view/roll.js$timestamp";?>"></script>
<script type="text/javascript">
	var rankingData = <?php echo $data?>;
	var rollData = <?php echo $adData?>;
	React.render(
		React.createElement(Roll,{items:rollData})
		,document.getElementById('roll')
	);
	
	React.render(
		React.createElement(GameList, {items: rankingData})
	  , document.getElementById('container')
	);
	$(function(){
		 $('#footer').html('<?php echo str_replace(PHP_EOL, '', $this->render("layout/footer.phtml")); ?>');	   
 })
	
	$(function(){
		var pgwSlider = $('#roll ul').pgwSlider({displayList:false,touchControls:true});
        $("#roll img").swipe({
                swipeLeft:function() {
                        pgwSlider.previousSlide();
                },
                swipeRight:function(){
                         pgwSlider.nextSlide()
                },
                swipe:function(event, direction, distance, duration, fingerCount, fingerData) {
                        if(!distance){
                                $(this).find('[style="opacity"]')
                                var sfs = rollData.data[$(this).attr('alt')];
                                window.location.href = sfs.href;
                        }
                },
                threshold:0
        });
	});
</script>
<script src="<?php echo "$appJs/loadImg.js$timestamp";?>" type="text/javascript"></script>
</html>