(function(a,b){var e={partslist:{curIndex:2,ajaxUrl:""}};Gou.template={aHeader:'<div class="logo-search">				<h1>购物大厅</h1>				<a class="search" href="<%=url%>">					<div>						<h2>请输入商品名</h2>						<button></button>					</div>				</a>			</div>			<nav>				<ul>					<%for(var i=0, len=nav.length; i<len; i++){%>						<%if(nav[i].selected){%>						<li class="selected"><span><%=nav[i].name%></span></li>						<%}else{%>						<li><a href="<%=nav[i].link%>"><%=nav[i].name%></a></li>						<%}%>					<%}%>				</ul>			</nav>',bHeader:'<div class="title-back">					<h1><%=subtitle%></h1>					<div class="back"><a href="<%=homeurl%>"></a></div>				</div>				<%if(_self.data){%>				<nav>					<ul>						<%for(var i=0, len=data.length; i<len; i++){%>							<li<%if(data[i].selected){%> class="selected"<%}%>>								<a data-ajaxurl="<%=data[i].ajax_url%>"><%=data[i].title%></a>							</li>						<%}%>					</ul>				</nav>				<%}%>',topBanner:'<%if(data.link){%>				<div class="ad-pic" style="background:url(<%=data.img%>) no-repeat 0 0; background-size:16rem auto;">					<i></i><a href="<%=data.link%>"></a>				</div>				<%}%>',recommend:'<section class="tj-webapp">			<%if(data.length){%>				<ul>					<%for(var i=0, len=data.length; i<len; i++){%>					<li><a href="<%=data[i].link%>"><img src="<%=blankPic%>" data-src="<%=data[i].img%>"></a></li>					<%}%>				</ul>			<%}%>			</section>',banner:'<section class="scroll-banner">				<div class="pic">					<ul>						<%for(var i=0, len=data.length; i<len; i++){%>						<li><a href="<%=data[i].link%>"><img src="<%=data[i].img%>" alt="<%=data[i].title%>"><span><%=data[i].title%></span></a></li>						<%}%>					</ul>				</div>				<div class="handle">					<%for(var j=0, len=data.length; j<len; j++){%>					<span<%if(j==0){%> class="on"<%}%>></span>					<%}%>				</div>			</section>',points:'<section class="jf-links">				<ul>					<%for(var i=0, len=data.length; i<len; i++){%>					<li><a href="<%=data[i]%>"></a></li>					<%}%>				</ul>			</section>',notice:"",icoItem:'<section class="ico-show">				<h2><%=title%></h2>				<%if(data.length){%>				<ul>					<%for(var i=0, len=data.length; i<len; i++){%>					<li>						<a href="<%=data[i].link%>">							<span><img src="<%=blankPic%>" data-src="<%=data[i].img%>"></span>							<em><%=data[i].name%></em>						</a>					</li>					<%}%>				</ul>				<%}%>			</section>',footer:'<footer class="ft">				<div class="help">					<span>官网QQ群：237057997</span>					<a style="display:block;text-align:center;text-decoration:underline;" href="/weixin">点此关注微信公共账号，随时可知天下事。</a>				</div>				<div class="copyright">					<p>增值电信许可证:<a href="/attachs/11.jpg" target="_blank">粤B2-20120350</a></p>					<p>copyright &copy; 2012 <a target="_blank" href="http://www.miitbeian.gov.cn/">粤ICP备05087105号</a></p>					<p>网络文化经营许可证：<a href="/attachs/SKMBT_C35107083006260.jpg" target="_blank">粤网文[2013]029-029号</a></p>					<p>粤文市审[2012]196号</p>				</div>			</footer>',footer1:'<footer class="ft">					<div class="help">						<span>官网QQ群：237057997</span>						<span>微信公共账号：金小号</span>					</div>					<div class="copyright">						<p>copyright &copy; 2012 粤ICP备05087105号</p>					</div>				</footer>',gotop:'<div class="gotop"><a href="javascript:window.scrollTo(0,1);">返回顶部</a></div>',codSearch:'<div class="cod-search">				<form action="<%=data.action%>"><input type="text" name="<%=data.name%>" placeholder="<%=data.keyword%>" /><button></button></form>			</div>',codList:'<%for(var i=0, ilen=data.list.length; i<ilen; i++){%>			<section class="item<%=(data.list[i].type_dir===1? " pic-right":" pic-left")%>">				<figure class="clearfix">					<div class="c-main">						<div class="pic">							<a href="<%=data.list[i].img_data.link%>"><img src="<%=blankPic%>" data-src="<%=data.list[i].img_data.img%>" /></a>							<div class="mask"><%=data.list[i].img_data.title%></div>						</div>					</div>					<div class="desc c-sub" style="background-color:<%=(data.list[i].color? data.list[i].color:"#f57766")%>"><a href="<%=data.list[i].link%>"><h3><%=data.list[i].type_name%></h3></a></div>				</figure>				<div class="detail">					<ul><%var codlinks=data.list[i].text_data; while(codlinks.length){%>						<li><a href="<%=codlinks[0].link%>" style="color:<%=codlinks[0].color%>"><%=codlinks[0].title%></a></li>					<%codlinks.shift();}%></ul>				</div>			</section>			<%}%>',picList:'<div class="list_item">				<ul>					<%for(var i=0, len=data.list.length; i<len; i++){%>					<li>						<a href="<%=data.list[i].link%>">							<div class="pic">								<img src="<%=blankPic%>" data-src="<%=data.list[i].img%>" alt="">							</div>							<div class="desc1"><%=data.list[i].descrip%></div>						</a>					</li>					<%}%>				</ul>			</div>',jhnews:'<%for(var i=0, len=data.list.length; i<len; i++){%>			<section class="scroll-banner">				<div class="pic">					<ul>						<li>							<a href="<%=data.list[i].pic.link%>">								<img src="<%=blankPic%>" data-src="<%=data.list[i].pic.img%>" alt="<%=data.list[i].pic.title%>">								<span><%=data.list[i].pic.title%></span>							</a>						</li>					</ul>				</div>			</section>			<section class="timely-news">				<ul>					<%for(var j=0, jlen=data.list[i].news.length; j<jlen; j++){%>					<li<%if(j>3){%> class="block"<%}%>>						<a href="<%=data.list[i].news[j].link%>">							<h3><%=data.list[i].news[j].title%></h3>							<p><%=data.list[i].news[j].category%></p>						</a>					</li>					<%}%>				</ul>			</section>			<%}%>',shopList:'<div class="list">				<ul>					<%for(var i=0, len=data.list.length; i<len; i++){%>					<li>						<a href="<%=data.list[i].shop_url%>">						<dl>							<dt><%=data.list[i].num%></dt>							<dd>								<p><%=data.list[i].title%></p>								<p class="level">									<img src="<%=data.list[i].credit_img%>" alt="<%=data.list[i].title%>" />								</p>							</dd>						</dl>							<div class="pic">								<%if(data.list[i].goods!==null){%>								<%for(var j=0, l=data.list[i].goods.length; j<l; j++){%><span><img src="<%=data.list[i].goods[j]%>" /></span><%}%>								<%}%>							</div>						</a>					</li>					<%}%>				</ul>			</div>'};var c=typeof t_bi!="undefined"?("t_bi="+t_bi):"",d=0,f=/client\./i.test(location.host)?"apk_":"";Gou.view=a.View.extend({config:{multiChild:true,dataSave:true},blankPic:a.PathConfig.appRef.replace(/assets\/js\//g,"pic/blank.gif")});Gou.view.setting={topBanner:{config:{tempId:"topBanner",wrap:".top-banner",ajaxUrl:"/api/"+f+"gou/download",hooks:{"&":".J_topBanner"},events:[{selector:".J_topBanner i",type:"singleTap",callback:"hidebox"},]},hidebox:function(){var h=$(this),g=h.parents(".J_topBanner");g.hide();},loadurl:typeof apk_download_url!="undefined"?apk_download_url:""},header:{config:{tempId:"aHeader",wrap:"#iHeader",multiChild:false,dataSave:false},nav:[{name:"推 荐",link:a.util.fullUrl("",c)},{name:"货到付款",link:a.util.fullUrl("/cod",c)},{name:"双11来了",link:a.util.fullUrl("/shop",c)}],url:"/search?refer="+escape(document.location.href)},subheader:{config:{tempId:"bHeader",wrap:"#iHeader",multiChild:false,dataSave:false},homeurl:a.util.fullUrl("",c)},recommend:{config:{tempId:"recommend",wrap:"#iScroll",ajaxUrl:"/api/"+f+"gou/ad"}},banner:{config:{tempId:"banner",wrap:"#iScroll",ajaxUrl:"/api/"+f+"gou/ad?"+c,delay:3000,hooks:{"&>0":[".J_scrollBanner","curIndex~0"],},callback:function(g,j){var h=$(".J_scrollBanner"),m=h.find(".pic ul"),o=m.find("li"),k=o.length,n=h.find(".handle span"),l=function(p){if(p==k){p=0;m.animate({left:0},0);}else{m.animate({left:(-o.width()*p)+"px"},500);}n.removeClass("on").eq(p).addClass("on");h.attr("curIndex",p);},i=function(p){var q=setTimeout(function(){if(p){m.width(o.width()*k);}var r=parseInt(h.attr("curIndex"))+1;l(r);i();},j.delay);};i(true);}}},points:{config:{tempId:"points",wrap:"#iScroll",ajaxUrl:"/api/"+f+"gou/link",getBIData:function(h){var g=[];h.data.forEach(function(j){g.push(a.util.fullUrl(j,c));});h.data=g;return h;}}},notice:{config:{tempId:"notice",wrap:"#iScroll"}},mall:{config:{tempId:"icoItem",wrap:"#iScroll",ajaxUrl:"/api/"+f+"gou/mall"},title:"综合购物商城"},theme:{config:{tempId:"icoItem",wrap:"#iScroll",ajaxUrl:"/api/"+f+"gou/theme"},title:"主题店"},tuan:{config:{tempId:"icoItem",wrap:"#iScroll",ajaxUrl:"/api/"+f+"gou/tuan"},title:"团购&折扣"},helper:{config:{tempId:"icoItem",wrap:"#iScroll",ajaxUrl:"/api/"+f+"gou/helper"},title:"生活便民助手"},footer:{config:{tempId:"footer",wrap:"#iScroll"}},footer1:{config:{tempId:"footer1",wrap:"#iScroll"}},gotop:{config:{tempId:"gotop",wrap:"#iScroll"}},codSearch:{config:{tempId:"codSearch",wrap:"#iScroll",multiChild:true,hooks:{"&":".cod-list"},ajaxUrl:"/api/cod/search",callback:function(){$("#iScroll").css("min-height",$(window).height()+"px");}}},list:{config:{tempId:"codList",wrap:"#iScroll",multiChild:true,ajaxUrl:"/api/cod/index",callback:function(h,g,i){Gou.view.setting.loadingData(h,g,i,1);}}},newlist:{config:{tempId:"picList",wrap:"#iScroll",hooks:{"&<0":".new-wrap"},ajaxUrl:"/api/new/index",multiChild:true,callback:function(h,g,i){Gou.view.setting.loadingData(h,g,i,1);}}},partslist:{config:{tempId:"picList",wrap:"#iScroll",hooks:{"&<0":".mall-wrap"},ajaxUrl:a.util.storage("typeIndex")||"/api/fitting/goods",events:[{selector:".J_partsNav li a",type:"singleTap",callback:"typeShow"},],multiChild:true,callback:function(h,g,i){Gou.view.setting.loadingData(h,g,i,2);}},typeShow:function(i,h){var k=$(this),g=$(this.parentNode),j=k.attr("data-ajaxurl");g.siblings().removeClass("selected");g.addClass("selected");a.util.storage("typeIndex",j);$("#iScroll").scrollTop(0).attr("data-ajaxurl",j);i.setAjaxUrl(j,false,true);}},loadingData:function(i,h,k,g){var j;switch(g){case 1:j=h.ajaxUrl;break;case 2:j=a.util.storage("typeIndex")||"/api/fitting/goods";}if(e.partslist.ajaxUrl!=j){e.partslist={curIndex:2,ajaxUrl:j,hasNext:undefined};}else{e.partslist.ajaxUrl=j;}e.partslist.splite=e.partslist.ajaxUrl.indexOf("?")>-1?"&page=":"?page=";if(e.partslist.hasNext===undefined){e.partslist.hasNext=k.data.hasnext;a.util.scroll(document,function(m,l,n){if(l+m>=n){if(e.partslist.hasNext===true){e.partslist.hasNext=false;if(!e.partslist.loading){e.partslist.loading=true;$(i).append('<div class="loading"><i class="icon-img"></i><span class="icon-label">正在加载中...</span></div>');}else{$(i).find(".loading").show();}a.util.ajax({url:e.partslist.ajaxUrl+e.partslist.splite+e.partslist.curIndex,success:function(o){if(o.success){o.blankPic=a.PathConfig.appRef.replace(/assets\/js\//g,"pic/blank.gif");e.partslist.curIndex=o.data.curpage+1;e.partslist.hasNext=o.data.hasnext;setTimeout(function(){a.View[h.viewId].setData(o,false,false);$(i).find(".loading").hide();},1000);}}});}}});}},shopList:{config:{tempId:"shopList",wrap:"#iScroll .panel",ajaxUrl:"/api/shop/index",hooks:{"&<0":["data-hasnext~true","data-curpage~1","data-ajaxurl~/api/shop/index"]},callback:function(h,g,i){Gou.view.setting.loadingData(h,g,i,1);}}},jhnews:{config:{tempId:"jhnews",wrap:"#iScroll .panel",ajaxUrl:"/api/news/jhnews",multiChild:true,callback:function(h,g,i){}}}};})(ICAT,window);