(function(a,b){a.app("AG",function(){a.require("jm",["~jm/jm.css","~jm/jm.js"]);return{version:"1.0"}});a.mix(AG,{scrollPic:function(){if(!b("#mainfocus")[0]){return}a.include("./assets/js/slide.auto.js",function(){var f=b("#mainfocus"),c=f.find("li").length,d=f.find(".ui-slide-scrollbox").width(),h=f.find(".ui-slide-title span"),e=1,g=new SlideAuto();f.find(".ui-slide-scroll").width(d*c*2);g.init({touchId:".mainfocus",loop:true,auto:true})})},textPic:function(){var g=b("#J_textPic");if(!g[0]){return}var f=g.attr("dt-ajaxUrl"),c=g.siblings(".handle"),e=1,d=function(i,h){b.get(f,{page:i},function(m){var j=b.parseJSON(m),k='<div class="wrap" style="left:'+(h?-48:48)+'em;"><ul>@ph</ul></div>',l="",o=["cor-blue","cor-orange","cor-red","cor-purple"],n=h?"\u4e0a\u9875\u4fe1\u606f\u6ca1\u6709\u4e86":"\u4e0b\u9875\u4fe1\u606f\u6ca1\u6709\u4e86";if(!j.success){alert(n);return}if(j.data.curpage==1){c.eq(0).addClass("disable")}if(!j.data.hasnext){c.eq(1).addClass("disable")}c.eq(h?1:0).removeClass("disable");e=j.data.curpage;a.foreach(j.data.list,function(q,p){l+='<li class="'+o[q]+'"><a href="'+p.link+'"><img src="'+p.img+'" alt=""><em><span>'+p.title+"</span></em></a></li>"+(q==1?"</ul><ul>":"")});k=k.replace(/@ph/,l);g.append(k).find(".wrap:first").animate({left:(h?48:-48)+"em"},1000);g.find(".wrap:last").animate({left:0},1000,function(){g.find(".wrap:first").remove()})})};c.eq(0).click(function(){if(b(this).hasClass("disable")){return}d(e-1,true)});c.eq(1).click(function(){if(b(this).hasClass("disable")){return}d(e+1,false)});a.use("jm",function(){g.find(".wrap").live("swipeleft",function(){if(c.eq(0).hasClass("disable")){return}d(e-1,true)}).live("swiperight",function(){if(c.eq(1).hasClass("disable")){return}d(e+1,false)})})}});b(function(){AG.scrollPic();AG.textPic()})})(ICAT,jQuery);
