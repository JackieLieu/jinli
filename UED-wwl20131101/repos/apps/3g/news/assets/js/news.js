(function(a){a.PathConfig();a.PathConfig._isConcat=false;a.app("GNnews",function(){return{version:"1.1"};});a.include(["lib/zepto/zepto.js"],function(){GNnews.init();});a.mix(GNnews,{init:function(){setTimeout(function(){GNnews.fetchData();GNnews.slider();},1500);$(".ui-search form").on("submit",function(f){f.preventDefault();var c=$(this).attr("action"),b=$(".inp-search").attr("name"),d=$(".inp-search").val(),g=c+"&"+b+"="+encodeURIComponent(d);window.location.href=g;});GNnews.gotop();GNnews.showCateMore();GNnews.baiduHots();},baiduHots:function(){var b=$("#api-baidu-hots").val();$.getJSON(b,function(c){$(".inp-search").val(c.data.top1);$(".in-hot-world").html(c.data.keywords);});},fetchData:function(){if(!$(".news-tab-item")){return;}var f=$(".news-hot-title").attr("remote"),e=$(".news-tab-item"),c,d,b=$(".news-tab");$.getJSON(f,function(g){var h='<a href="'+g.data.list.data[0].url+'">'+g.data.list.data[0].title+"</a>";$(".news-hot-title").html(h);});if(navigator.onLine){$.each(b,function(g,h){d=$(h).children().first().data("part");c=$("#J_news_tab"+d+" li").first().data("remote");GNnews.getNews(c,$("#J_news_tab_item"+g+" ul").first());});}$(".news-tab").delegate("li","click",function(g){var l=$(this),k,m,j=l.data("part"),i=l.data("num"),h=l.data("remote");k=$("#J_news_tab_item"+j+" ul");m=k.eq(i);l.parent().children().removeClass("sel");l.addClass("sel");k.addClass("ishide");m.removeClass("ishide");if(m.hasClass("done")){return;}if(navigator.onLine){GNnews.getNews(h,m);}});},getNews:function(c,d,b){$.ajax({type:"GET",url:c,dataType:"json",success:function(g){d.addClass("done").html("");var h=g.data.list.data,e=[],f;$.each(h,function(i,j){if(j.color==""){f='<li class="item"><a href="'+j.url+'">'+j.title+"</a></li>";}else{f='<li class="item"><a href="'+j.url+'" style="color:'+j.color+'">'+j.title+"</a></li>";}e.push(f);});if(g.data.moreUrl&&b==undefined){e.push('<li class="item list-more"><a href="'+g.data.moreUrl+'">更多资讯</a></li>');}d.append(e.join(""));}});},slider:function(){if(!$("#J_full_slider")){return;}var e=$("#J_full_slider"),d=false;var b=e.data("ajaxurl");var f="",c="";$.getJSON(b,function(m){var j=m.data,o="";for(var k=0;k<j.length;k++){f=f+'<li><a href="'+j[k].link+'"><img src="'+j[k].img+'" ></a><a href="'+j[k].link+'"><span>'+j[k].title+"</span></a></li>";if(k==0){c=c+'<span class="on"></span> ';}else{c=c+"<span></span> ";}}o='<div class="ui-slider-wrap"><div class="ui-slider-content"><ul class="ui-slider-pic ui-slider-text">						'+f+'						</ul></div><div class="ui-slider-handle ui-slider-handle-circle">'+c+"</div></div>";$("#J_full_slider").append(o);var h=e.find(".ui-slider-content"),q=h.find("li"),l=q.length,p=e.find(".ui-slider-handle span"),n=function(i){if(i==l){i=0;h.animate({left:0},0);}else{h.animate({left:(-q.width()*i)+"px"},500);}p.removeClass("on").eq(i).addClass("on");e.attr("curIndex",i);},g=function(i){var r=setTimeout(function(){if(i){h.width(q.width()*l);}var s=(parseInt(e.attr("curIndex"))||0)+1;n(s);g();},8000);};g(true);});},gotop:function(){if(!$(".ui-goptop")){return;}window.onscroll=function(){if(document.body.scrollTop>50){$(".ui-gotop").show();}else{$(".ui-gotop").hide();}};$(".ui-gotop").on("click",function(){setTimeout(function(){window.scrollTo(0,1);},100);});},showCateMore:function(){if(!$(".J_news_more")){return;}$(".J_news_more").on("click",function(){$(".ui-toolbar-right .icon-arrow").toggleClass("icon-arrow-state");$(".news-menu-wrap").toggleClass("ishide");});}});})(ICAT);