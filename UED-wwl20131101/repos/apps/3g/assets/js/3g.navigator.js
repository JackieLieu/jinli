(function(a,c){var b=a.namespace("GNnav");c.fn.tabs=function(e){var k={navWrap:".ui-tabs-nav",itemWrap:"li",contentWrap:".ui-tabs-content",parentAjax:false};var g=c.extend(k,e),i=c(this);var f=i.find(g.navWrap),j=i.find(g.contentWrap);if(g.parentAjax){g.callback({url:f.data("ajaxurl")});}f.delegate(g.itemWrap,"click",function(){var m=c(this).data("tab"),l=c(this).data("ajaxurl");if(l==="undefined"){f.trigger("change:tabs",m);}else{f.trigger("change:tabs",[m,l]);}});f.on("change:tabs",function(m,l){f.find(g.itemWrap).removeClass("ui-state-active");f.find("[data-tab='"+l+"']").addClass("ui-state-active");});f.on("change:tabs",function(n,m,l){if(l){if(!f.find("[data-tab='"+m+"']").hasClass("done")){g.callback({url:l,tabName:m,});}}j.find("[data-tab]").removeClass("ui-state-active");j.find("[data-tab='"+m+"']").addClass("ui-state-active");});var h=f.find("li:first-child").attr("data-tab");f.trigger("change:tabs",h);return this;};a.mix(b,{init:function(){a.incfile(["../tempcore.js"],function(){if(c("#J_tab_siteWrap")[0]){c("#J_tab_siteWrap").tabs({callback:function(f){b.getApps(f);}});}if(c("#J_tab_newsWrap")[0]){c("#J_tab_newsWrap").tabs({parentAjax:true,callback:function(f){b.getNews(f);}});}b.autocomplete();sessionStorage.setItem("curpage",location.href);var e=location.protocol+"//"+location.host;if(c("html").attr("manifest")){c("body").delegate("a","click",function(f){f.preventDefault();if(!this.getAttribute("data-ajaxUrl")){location.href=!navigator.onLine?e+"/offline":this.href;}});}});},getApps:function(g){var f=c("#J_tab_siteWrap"),e=f.find(".ui-tabs-nav [data-tab="+g.tabName+"]"),h=f.find(".ui-tabs-content [data-tab="+g.tabName+"]");c.ajax({type:"get",url:g.url,dataType:"json",success:function(i){if(i.success){e.addClass("done");h.append('<ul class="hot-site-icon">'+template("J_siteAppView",i)+"</ul>");}}});},getNews:function d(f){var i=c("#tabLink1 .nav-news-list"),h=c("#tabLink2 .nav-news-list"),g=c("#tabLink3 .nav-news-list"),e=c("#tabLink4 .nav-news-list");c.ajax({type:"get",url:f.url,dataType:"json",success:function(j){i.html("").append(template("J_siteNewsView",j.data.top_list));i.append('<li class="btn-more news-more"><a href="http://i.ifeng.com/news/newsi?ch=zd_jl_dh&vt=5&dh=touch&mid=9yCLji">更多资讯</a></li>');h.html("").append(template("J_siteNewsView",j.data.news_list));h.append('<li class="btn-more news-more"><a href="http://i.ifeng.com/?from=itouch&mid=9yCLji&ch=zd_jl_dh&vt=5&vt=5">更多资讯</a></li>');g.html("").append(template("J_siteNewsView",j.data.play_list));g.append('<li class="btn-more news-more"><a href="http://i.ifeng.com/ent/enti?ch=zd_jl_dh&vt=5&dh=touch&mid=9yCLji">更多资讯</a></li>');e.html("").append(template("J_siteNewsView",j.data.war_list));e.append('<li class="btn-more news-more"><a href="http://i.ifeng.com/mil/mili?ch=zd_jl_dh&vt=5&dh=touch&mid=9yCLji">更多资讯</a></li>');},error:function(l,k,j){console.log("network connection is error.");}});},autocomplete:function(){var e=c(".inp-search");if(!e[0]){return;}e.addClass("inp-default");e.on("focus",function(g){var h=c(this),f=h.attr("defaultValue");if(h.val()==f){h.val("").removeClass("inp-default");}});e.on("blur",function(g){var h=c(this),f=h.attr("defaultValue");if(h.val()==""){h.val(f).addClass("inp-default");}});e.parent().find("input[type=submit]").on("click",function(f){if(e.val()==""){f.preventDefault();}});}});c(function(){b.init();var e=c("body").attr("dt-cr");if(e){c("a").click(function(f){f.preventDefault();var g=this.getAttribute("dt-labelCla")?"&tid="+this.getAttribute("dt-labelCla"):"";location.href=e+"?url="+encodeURIComponent(this.href)+g;});}});})(ICAT,Zepto);