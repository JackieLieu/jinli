(function(a){a.app("GNEvents",function(){return{verstion:"1.0"}});a.mix(GNEvents,{init:function(){setTimeout(function(){window.scrollTo(0,1)},100);a.include(["lib/zepto/zepto.js"],function(){$(".wrapper").delegate(".J_award_btn,.J_again_btn","click",function(){if($(".J_award_btn,.J_again_btn").hasClass("done")){return}$.ajax({url:"http://"+location.host+"/reward/fate",type:"GET",dataType:"json",timeout:10000,success:function(b){if(b.success){$(".J_award_btn,.J_again_btn").addClass("done");switch(b.data.code){case 101:GNEvents.showTips(b.data.code,{url:b.data.data.redirect_url});break;case 102:case 103:GNEvents.showTips(b.data.code);break;case 104:GNEvents.showTips(b.data.code);break;case 105:GNEvents.showTips(b.data.code);case 0:GNEvents.showTips(b.data.code,{url:b.data.data.detail_url,name:b.data.data.name});break;case 106:GNEvents.showTips(b.data.code);break;default:GNEvents.showTips(-2)}}},error:function(){GNEvents.showTips(105)}})})})},showTips:function(c,d){var b;switch(c){case 101:window.location.href=d.url;break;case 102:case 103:b='<div class="timeout">							<p class="txt">\u4eca\u5929\u7684\u5956\u54c1\u5df2\u7ecf\u6d3e\u5b8c\uff0c\u8bf7\u660e\u5929\u518d\u6765\u5427\uff01</p>						</div>';GNEvents.animation(b);break;case 104:b='<div class="timeout">							<p class="txt">\u60a8\u4eca\u5929\u7684\u62bd\u5956\u6b21\u6570<br>\u5df2\u7ecf\u7528\u5b8c<br>\u8bf7\u660e\u5929\u518d\u6765\u5427\uff01</p>						</div>';GNEvents.animation(b);break;case 105:b='<div class="unwinning">							<p class="txt">\u5dee\u4e00\u70b9\u5c31\u4e2d\u5956\u4e86\uff01</p>							<p><a class="btn J_again_btn">\u518d\u6765\u4e00\u6b21</a></p>						</div>';GNEvents.animation(b);break;case 0:b='<div class="unwinning">							<p class="txt">\u606d\u559c\u60a8\u83b7\u5f97'+d.name+'</p>							<p><a href="'+d.url+'" class="btn">\u67e5\u770b\u5956\u52b1</a></p>						</div>';GNEvents.animation(b);break;case 106:b='<div class="winning-error">\u54ce\u5440\uff0c\u6211\u4eec\u7684\u7a0b\u5e8f\u51fa\u9519\u4e86,\u8bf7\u7a0d\u540e\u518d\u8bd5!</div>';GNEvents.animation(b);break;case -2:b='<div class="winning-error">\u54ce\u5440\uff0c\u6211\u4eec\u7684\u7a0b\u5e8f\u51fa\u9519\u4e86,\u8bf7\u7a0d\u540e\u518d\u8bd5!</div>';GNEvents.animation(b);break;default:b='<div class="winning-error">\u670d\u52a1\u5668\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01</div>';GNEvents.animation(b)}},animation:function(c){var b=$(".lottery-pointer"),d=$(".winning-tips-wrap");b.css({"-webkit-transform-origin":"46px 57px","-webkit-transform":"rotateZ(0deg)"});b.animate({rotate:360*3+Math.ceil(Math.random()*360)+"deg",},{duration:3000,easing:"ease-in-out",complete:function(){window.scrollTo(0,100);$(".J_award_btn,.J_again_btn").removeClass("done");$(".J_winning_tips").removeClass("ishide").addClass("show-winning-tips");d.html(c)}})}});GNEvents.init()})(ICAT);
