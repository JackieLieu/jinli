(function(a,f){var e=f.body.className,c;if(!e){return}a.Model(e,GNnav.initdata);var d=a.Model[e],b=d.getInitData(e);d.extend({_render:function(i,h,g){h=a.mix(h,i.mixData);a.View[i.mod]?a.View[i.mod].setData(h):a.View(i.mod,h);if(g){g()}},modRender:function(j,i,k,g){if(i.ajaxUrl){var h="__icat_"+i.mod+j;if(navigator.onLine==true){$.ajax({type:"POST",timeout:10000,url:i.ajaxUrl+j,cache:false,success:function(n){if(!n){return}a.Model.storage(h,n);var m=JSON.parse(n);k.addClass("done");i.mixData.parentWrap=k[0];d._render(i,m,g)},error:function(){if(a.Model.storage(h)==null){return}var m=a.Model.storage(h);m=JSON.parse(m);d._render(i,m,g)}})}else{if(a.Model.storage(h)==null){return}var l=a.Model.storage(h);l=JSON.parse(l);d._render(i,l,g)}}else{d._render(i,{},g)}},showDetail:function(h){if(h==undefined){return}var i=b.CommModule.detail,g=$(".J_nav_title").eq(h),k=g.data("id"),j=g.next(".J_nav_content").children(".ui-nav-ul");d.modRender(k,i,j,function(l){})}});a.Controller(e,function(h){if(!b){return}var i=b.InitModule,g=i.list.mixData.curIndex;if(i&&!a.isEmptyObject(i)){a.foreach(i,function(j,l){a.isArray(l)||a.isString(l)?a.util.addModsWrap(l):d.modRender(j,l)})}d.showDetail(0);d.showDetail(1);d.showDetail(2);d.showDetail(3);d.showDetail(4);d.showDetail(5)});switch(e){case"home":c=[{el:".J_nav_title",eType:"singleTap",stopPropagation:true,preventDefault:true,callback:function(){var j=$(this),g=$(".J_nav_title"),l=$(".J_nav_content"),k=j.data("id"),i=j.next(),h=g.index(j);k==g.length-1?j.addClass("ui-nav-last"):"";d.showDetail(h);a.Model.cookie("navIndex",h,3600);if(i.hasClass("ishide")){l.addClass("ishide");i.removeClass("ishide");g.removeClass("ui-nav-arrow");j.addClass("ui-nav-arrow")}else{i.addClass("ishide");j.removeClass("ui-nav-arrow")}$(document.body).scrollTop(j.height()*h+11)}}];break}a.Controller[e];a.Controller.addCurrent(e)})(ICAT,document);
