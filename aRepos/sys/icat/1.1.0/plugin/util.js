(function(b,c){var a=Object.prototype,f=["Boolean","Number","String","Function","Array","Date","RegExp","Object"],e={},d=function(g){return g==null?String(g):e[a.toString.call(g)]||"object"};b.foreach(f,function(){var g=this;e["[object "+g+"]"]=g.toLowerCase()});b.foreach("Null Undefined Boolean Number String Function Array Object".split(" "),function(){var g=this;b["is"+g]=function(){return d.apply(this,arguments)===g.toLowerCase()}});b.mix(c,{tdMerge:function(g,j,h){if(!b.isString(g)||!/\{|\}/g.test(g)){return}var i=g.match(/\{\w+\}/g);if(!i.length){return}b.foreach(i,function(){var k=this.replace(/\{|\}/g,""),m=new RegExp("{"+k+"}"),l=j[k];g=g.replace(m,l?l:(h?"{"+k+"}":""))});return g},dealUrl:function(h){if(!h){return}var g=h.replace(/\s/g,"");if(!g){return}g=/\.js|\.css/i.test(g)?g:g+".js";if(b.isDebug){g=/\.source/i.test(g)?g:g.replace(/\.js|\.css/g,/\.css/i.test(g)?".source.css":".source.js")}if(/\w?:\/\//.test(g)){return g}else{if(/\.\/(~)?/.test(g)){if(/\.\/\w+/.test(g)){g=g.replace(/\.\//g,b.appRef+"/")}if(/\.\/~/.test(g)){g=g.replace(/\.\/~/g,b.appPlugin)}}else{if(/~\w+/.test(g)){g=g.replace(/~/g,b.sysPlugin)}else{g=b.sysRef+"/"+g}}}return g}})})(ICAT,ICAT.util);
