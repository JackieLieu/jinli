var SlideAuto=function(){this.init=function(b){var a=this;this.vertical=b.vertical||false;this.touch=$.type(b.touchId)=="string"?$(b.touchId):b.touchId;if(!this.touch[0]){return}this.scroll=this.touch.find(">.ui-slide-scrollbox>.ui-slide-scroll");this.auto=b.auto||false;this.loop=b.loop||false;this.vertical=b.vertical||false;this.timer=null;this.startX=0;this.startY=0;this.curX=0;this.curY=0;this.touchX=0;this.touchY=0;this.itemW=this.touch.find(".ui-slide-item").width();this.itemH=this.touch.find(".ui-slide-item").height();this.curIndex=0;this.numIndex=this.scroll.find(">.ui-slide-item").length;this.tabs=this.touch.find(">.ui-slide-tabs>.ui-slide-tab");this.isTouch=this.touch.hasClass("ui-slide-touch");this.prev=this.touch.find(">.ui-slide-prev");this.next=this.touch.find(">.ui-slide-next");this.beforeSlide=b.beforeSlide||function(){};this.afterSlide=b.afterSlide||function(){};if(this.loop){this.scroll.append(this.scroll.html())}if(this.prev.length>0){this.prev.on("click",function(c){if(a.curIndex>0){a.slide(a.curIndex-1)}else{}})}if(this.next.length>0){this.next.on("click",function(c){if(a.curIndex<(a.numIndex-1)){a.slide(a.curIndex+1)}else{}})}if(this.tabs.length>1){this.tabs.on("click",function(){var d=this,c=a.tabs.index(d);clearTimeout(a.timer);a.timer=null;a.slide(c)})}this.scroll[0].addEventListener("touchstart",function(c){a.touchStart(c);c.stopPropagation()},false);this.scroll[0].addEventListener("touchmove",function(c){a.touchMove(c);c.stopPropagation()},false);this.scroll[0].addEventListener("touchend",function(c){a.touchEnd(c);c.stopPropagation()},false);if(this.auto){this.autoplay()}}};SlideAuto.prototype={autoplay:function(){var a=this;a.timer=setTimeout(function(){a.curIndex=a.curIndex>=a.numIndex?0:a.curIndex+1;a.slide(a.curIndex);a.autoplay()},5000)},touchStart:function(b){this.isMoving=false;var a=b.touches[0];this.startX=a.pageX;this.startY=a.pageY;this.curX=0;this.curY=0;this.touchX=0;this.touchY=0},touchMove:function(b){var a=b.touches[0];this.curX=a.pageX;this.curY=a.pageY;this.touchX=this.curX-this.startX;this.touchY=this.curY-this.startY;if(!this.isMoving){this.isMoveX=Math.abs(this.touchX)>Math.abs(this.touchY);this.isMoveY=Math.abs(this.touchX)<Math.abs(this.touchY);this.isMoving=true;if(this.vertical){if(this.isMoveY){b.preventDefault()}}else{if(this.isMoveX){b.preventDefault()}}}else{if(this.vertical){if(this.isMoveY){this.scroll[0].style.top=this.scroll[0].offsetTop+this.touchY/Math.abs(this.touchY)+"px";b.preventDefault()}}else{if(this.isMoveX){this.scroll[0].style.left=this.scroll[0].offsetLeft+this.touchX/Math.abs(this.touchX)+"px";b.preventDefault()}}}},touchEnd:function(a){if(!this.isMoving){return}clearTimeout(self.timer);self.timer=null;if(this.vertical&&this.isMoveY){if(this.touchY>10){if(this.curIndex<=0){this.slide(this.curIndex);return}else{this.slide(this.curIndex-1)}}else{if(this.touchY<-10){if(this.curIndex==this.numIndex-1){if(this.loop){this.slide(this.curIndex+1)}else{this.slide(this.curIndex);return}}else{this.slide(this.curIndex+1)}}else{}}}else{if(this.isMoveX){if(this.touchX>10){if(this.curIndex<=0){this.slide(this.curIndex);return}else{this.slide(this.curIndex-1)}}else{if(this.touchX<-10){if(this.curIndex==this.numIndex-1){if(this.loop){this.slide(this.curIndex+1)}else{this.slide(this.curIndex);return}}else{this.slide(this.curIndex+1)}}else{}}}}},slide:function(a){var c=this;this.beforeSlide();if(this.vertical){this.scroll.animate({top:-this.itemH*a+"px"},500,function(d){if(a>=c.numIndex){c.curIndex=0;c.scroll.css({top:0})}else{c.curIndex=a}c.reset(c.curIndex);c.afterSlide()})}else{var b=-(-$("body").css("font-size").replace(/px/g,""));this.scroll.animate({left:-this.touch.find(".ui-slide-item").width()/b*a+"em"},500,function(d){if(a>=c.numIndex){c.curIndex=0;c.scroll.css({left:0})}else{c.curIndex=a}c.reset(c.curIndex);c.afterSlide()});if(a<=0){c.prev.addClass("ui-slide-prevdis")}else{if(0<a<this.numIndex){c.prev.removeClass("ui-slide-prevdis")}}if(a==this.numIndex-1){c.next.addClass("ui-slide-nextdis")}else{if(a<this.numIndex-1){c.next.removeClass("ui-slide-nextdis")}}}if(c.auto&&c.timer==null){c.autoplay()}},reset:function(a){this.tabs.removeClass("ui-slide-tabcur").eq(a).addClass("ui-slide-tabcur")}};
