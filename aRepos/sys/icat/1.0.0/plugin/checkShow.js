(function(a){a.fn.extend({checkShow:function(q){q=a.extend({toolsBar:"toolsBar",thName:"txt"},q);var m=q.toolsBar;var g=q.thName;var p=new Array();var e=new Array();var b=new Array();var l=new Array();var h="";var k=a("tr",this);var n=a("th",k.eq(0));for(var f=0;f<n.length;f++){var d=n.eq(f).attr("colspan");if(isNaN(d)){d=1}e[f]=parseInt(d)}for(var f=0;f<n.length;f++){if(f==0){b[f]=e[f]}else{b[f]=b[f-1]+e[f]}}var o=a("th",k.eq(1));for(var f=0;f<o.length;f++){l[f]=o.eq(f).text()}for(var f=0;f<b.length;f++){if(f==0){p[f]=l.slice(0,b[f])}else{p[f]=l.slice(b[f-1],b[f])}}function c(s,r,u){var t=$ckBox.index(a("#"+s));for(var v=0;v<p.length;v++){if(r==v){if(u==true){e[v]=e[v]+1}else{e[v]=e[v]-1}document.all?n[v].setAttribute("colSpan",e[v]):n.eq(v).attr("colspan",e[v])}}if(u==true){for(var v=0;v<e.length;v++){if(e[v]>0){n.eq(v).show()}}o.eq(t).show();k.each(function(){a(this).find("td").eq(t).show()})}else{for(var v=0;v<e.length;v++){if(e[v]==0){n.eq(v).hide()}else{if(e[v]>0){n.eq(v).show()}}}o.eq(t).hide();k.each(function(){a(this).find("td").eq(t).hide()})}}for(var f=0 in p){for(var j=0 in p[f]){h=h+"<input type='checkbox' class='"+f+"' id="+g+f+j+" checked='checked'>"+p[f][j]}}h="<div id="+m+">"+h+"</div>";a(this).before(h);var $ckBox=a("#"+q.toolsBar).find(":checkbox");$ckBox.click(function(){var r=a(this).attr("id");var i=a(this).attr("class");c(r,i,this.checked)});return this}})})(jQuery);
