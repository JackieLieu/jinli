(function(a,h){if(h[a]===undefined){h[a]={}}a=h[a];var e=Array.prototype,d=e.indexOf,g=Object.prototype.toString,c=function(n,m,l,q){if(!m||!n){return n}if(l===undefined){l=true}var k,o,j;if(q&&(j=q.length)){for(k=0;k<j;k++){o=q[k];if(o in m){f(o,n,m,l)}}}else{for(o in m){f(o,n,m,l)}}return n},f=function(m,l,k,j){if(j||!(m in l)){l[m]=k[m]}},b={};c(a,{version:"1.0.0",__APP_MEMBERS:["namespace"],__APP_INIT_METHODS:["__init"],__init:function(){this.Env={mods:{}};this.Config={debug:true}},isNull:function(j){return j===null},isUndefined:function(j){return j===undefined},isBoolean:function(j){return typeof j==="boolean"},isString:function(j){return typeof j==="string"},isNumber:function(j){return typeof j==="number"&&isFinite(j)},indexOf:d?function(k,j){return d.call(j,k)}:function(m,k){for(var l=0,j=k.length;l<j;++l){if(k[l]===m){return l}}return -1},mix:c,augment:function(l,k,j,m){c(l.prototype,k.prototype||k,j,m);return l},add:function(k,l){var j=this;j.Env.mods[k]={name:k,fn:l};l(j);return j},namespace:function(){var m=arguments,k=m.length,s=null,q,n,r;for(q=0;q<k;++q){r=(""+m[q]).split(".");s=this;for(n=(h[r[0]]===s)?1:0;n<r.length;++n){s=s[r[n]]=s[r[n]]||{}}}return s},app:function(l,p){var k=this,n=a.isString(l),o=n?h[l]||{}:l,m=0,j=k.__APP_INIT_METHODS.length;c(o,k,true,k.__APP_MEMBERS);for(;m<j;m++){k[k.__APP_INIT_METHODS[m]].call(o)}c(o,a.isFunction(p)?p():p);n&&(h[l]=o);return o},log:function(l,j,k){var m=this.Config;if(m.debug){k&&(l=k+": "+l);if(h.console!==undefined&&console.log){console[j&&console[j]?j:"log"](l)}}},error:function(j){if(this.Config.debug){throw j}}});a.namespace("widget");a.__init();return a})("ICAT",this);(function(a,b){a.mix(a,b);a.extend({detect:function(c){return c.length>0},cQuery:function(){return b.apply(this,arguments)}});a.namespace("DOM","Event");a.DOM={query:function(){var d=[],c=b.apply(this,arguments);c.each(function(){d.push(this)});return d},get:function(){return b.apply(this,arguments).get(0)}};a.Event={dealArgs:function(c){var d=[],e=[];a.each(c,function(g,f){g===0?e.push(f):d.push(f)});e.push(d);return e},on:function(){var c=this.dealArgs(arguments);b(c[0]).bind.apply(b(c[0]),c[1])},live:function(){var c=this.dealArgs(arguments);b(c[0]).live.apply(b(c[0]),c[1])}}})(ICAT,jQuery);(function(b){var e=this,d=e.document,c=b.mix,f=b.cQuery,a;a={sysPath:f("#J_filePath").attr("sys-hostPath"),sysPlugin:f("#J_filePath").attr("sys-hostPath")+"/sys/icat/"+b.version+"/plugin/",appPlugin:f("#J_filePath").attr("app-pluginPath"),impFileRec:{},include:function(m,t){var h=typeof m=="string"?[m]:m;t=t||this.sysPlugin;for(var n=0,l=h.length;n<l;n++){var j=h[n].replace(/^\s|\s$/g,""),p=j.split("."),k=p[p.length-1].toLowerCase(),r=k=="css",g=t+j;var s=r?"link":"script",o=r?' type="text/css" rel="stylesheet" ':' type="text/javascript" ',q=(r?"href":"src")+'="'+g+'"';if(!this.impFileRec[g]){document.write("<"+s+o+q+"></"+s+">");this.impFileRec[g]=true}}},use:function(g,h){}};c(b,a)})(ICAT);ICAT.add("util",function(a){var c=a.DOM,b=a.Event,d=$=a.cQuery;a.namespace("util");a.mix(a.util,{focusBox:function(f,e){var g=$(f),h=e||g.val();if(!g.length){return}g.focus(function(){if(this.value==h){this.value=""}}).blur(function(){if(this.value==""){this.value=h}})},tipNum:function(f,k){var j=$(f),e=j.attr("maxlength"),l=j.siblings(k),h=a.browser.msie?"propertychange":"input focus blur",g=function(p){var n=p.val(),m=n.replace(/[^\x00-\xFF]/g,"**").length;l.html("\u60a8\u5df2\u7ecf\u8f93\u5165\u4e86:"+m+"\u4e2a\u5b57\u7b26\uff0c\u8fd8\u5269"+(e-m)+"\u4e2a");if(e-m<=0){p.val(n.substring(0,e))}};if(!j.length&&!l.length){return}g(j);j.bind(h,function(){g(j)})},checkAll:function(n,o,e){if(e){var f=o}else{var f=c.query("."+o)}var k=f.length,l;var m=c.query("."+n.className),g=m.length,h;if(n.checked){for(l=0;l<k;l++){f[l].checked=true}for(h=0;h<g;h++){m[h].checked=true}}else{for(l=0;l<k;l++){f[l].checked=false}for(h=0;h<g;h++){m[h].checked=false}}},checkOne:function(f,p){var m=c.query("."+p),k=m.length,h,o;if(!f.checked){for(h=0;h<k;h++){m[h].checked=false}return}for(var g=0,n=c.query("."+f.className),e=n.length;g<e;g++){if(!n[g].checked){o=false;break}else{o=true}}if(o){for(h=0;h<k;h++){m[h].checked=true}}},tipShow:function(h){var k={aimCla:".J_aimObject",tipId:"#J_tipBox",offsetX:0,offsetY:0},f=a.extend(k,h),g=d(f.aimCla),j=g.offset(),l=f.tipId.replace(/(#)/g,"");if(!g.length){return}if(!d(f.tipId).length){d("body").append('<div id="'+l+'" class="tip-box"></div>');var e=d("body").find(f.tipId)}else{var e=d("body").find(f.tipId)}g.hover(function(){e.css({left:(j.left+f.offsetX)+"px",top:(j.top+f.offsetY)+"px"}).html(g.attr("data-tipText")).show()},function(){e.hide()})},pwdStrength:function(){var h=function(j){if(j>=48&&j<=57){return 1}if(j>=65&&j<=90){return 2}if(j>=97&&j<=122){return 4}else{return 8}},f=function(j){modes=0;for(i=0;i<4;i++){if(j&1){modes++}j>>>=1}return modes},e=function(j){if(j.length<=4){return 0}Modes=0;for(i=0;i<j.length;i++){Modes|=h(j.charCodeAt(i))}return f(Modes)},g=function(n,m){var k=["pwd0","pwd1","pwd2"],p=n.next(".J_pwdSafe");if(m==null||m==""){var j=p.attr("data-class");p.removeClass(j)}else{var l=e(m);switch(l){case 0:var j=p.attr("data-class");p.removeClass(j).addClass(k[0]);p.attr("data-class",k[0]);break;case 1:var j=p.attr("data-class");p.removeClass(j).addClass(k[1]);p.attr("data-class",k[1]);break;case 2:var j=p.attr("data-class");p.removeClass(j).addClass(k[2]);p.attr("data-class",k[2]);break}}return};$(".J_pwdStrength").bind("blur keyup",function(){g($(this),this.value)})}})});
