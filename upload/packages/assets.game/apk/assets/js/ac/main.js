(function(){var b={expand_tips:'展开<i class="icon-arrow-down"></i>',show_tips:'收起<i class="icon-arrow-up"></i>'};var a={locked:false,openPageByViewType:function(e){var j=e.attr("data-type"),g=e.attr("data-viewType"),d=e.attr("data-id"),l=e.attr("data-gameId"),c=e.attr("data-url"),k=e.attr("data-title");
var i={};i.args={},i.type=j;i.args.newArgs={viewType:g,param:{contentId:d,gameId:l,url:g=="WebView"?c:"",title:g=="WebView"?k:"",source:""}};var f=errCal=function(){},h=window.gamehall?window.gamehall:navigator.gamehall;
switch(i.type){case"list":h.startlistactivity(f,errCal,JSON.stringify(i.args));break;case"detail":h.startdetailsactivity(f,errCal,JSON.stringify(i.args));
break;case"browser":h.startlocalbrowser(f,errCal,JSON.stringify(i.args));break;}},onEventAction:function(e,d){if(window.gamehall){var c=window.gamehall.onEvent(e,JSON.stringify(d));
}},getValueAction:function(e,d){if(window.gamehall){var c=window.gamehall.getValue(e,JSON.stringify(d));c=JSON.parse(c);if(e=="gamehall.hasnetwork"){var f="";
if(!c){f="网络异常，请稍候重试";onEvent("gamehall.alert",{alertStr:f});}return c;}}},expand:function(){$(".J-expand").click(function(){var c=$(this).html()==b.expand_tips?true:false;
if(c){$(this).html(b.show_tips);$(".J_content").addClass("h-auto");}else{$(this).html(b.expand_tips);$(".J_content").removeClass("h-auto");}});},scroll:function(){if($(".J_ac_anno").length){$(document).on({scroll:function(){c();
}});function c(){var e=$(".J_ac_anno").height(),f=window.scrollY;if(f>e){$(".J_ac_anno").addClass("ac-fixed");}else{$(".J_ac_anno").removeClass("ac-fixed");
}}}if($(".J_loadMore").length){var d=$(window).height();$(document).on({scroll:function(){var g=$(".J_loadMore").attr("data-hasnext");if(g=="false"||g==0){return;
}if(a.locked){return;}var h=document.body.clientHeight,e=document.documentElement.clientHeight,i=document.body.scrollTop;if(Math.abs(h-e)<i){var f=a.getValueAction("gamehall.hasnetwork",{});
if(f==false){return;}a.getACoinData();}}});}},moreWelfare:function(){$("#more").click(function(){if($(this).attr("data-viewType")){a.openPageByViewType($(this));
}if($(this).attr("data-action")){var d=$(this).attr("data-action");var c=$(this).attr("data-data")?elem.attr("data-data"):{};a.onEventAction(d,c);}});},getACoinData:function(){var e=$(".J_loadMore");
e.removeClass("invisible");a.locked=true;var d=e.attr("data-ajaxurl"),c=parseInt(e.attr("data-curpage"),10);$.ajax({type:"POST",url:d,dataType:"json",data:{page:c+1,token:token,uuid:uuid},success:function(k){a.locked=false;
var m=k.data;hasNext=m.hasNext,c=m.curPage,html="";for(var h=0,f=m.list.length;h<f;h++){var l=m.list[h],j="",g="";if(l.status=="no"){g="即将生效";}if(l.status=="available"){if(l.leftMount==0){g="已使用";
j="disable";}else{g="可用"+l.leftMount;}}if(l.status=="outdate"){g="已过期";j="disable";}html+='<li class="'+j+'">								<div class="toLeft">									<span class="mount">'+l.chargeMount+'</span>									<span class="status">'+g+'</span>								</div>								<div class="toRright">									<span class="origion">'+l.origin+'</span>									<span class="riqi">'+l.startDate+"至"+l.endDate+"</span>								</div>							</li>";
}setTimeout(function(){if(hasNext==0||hasNext=="false"){e.html('<span class="bottom">到底了，去其它页面看看吧</span>');}else{e.addClass("invisible");}$("#coinList").append(html);
e.attr("data-hasnext",hasNext);e.attr("data-curpage",c);},100);},error:function(){a.locked=false;e.addClass("invisible");}});},checkLoginStatus:function(){if(typeof isLogin=="undefined"){return;
}if(isLogin!=undefined&&isLogin=="false"){a.onEventAction("gamehall.finish",{});a.onEventAction("gamehall.clearlogin",{});a.onEventAction("gamehall.account",{});
}},init:function(){this.checkLoginStatus();this.scroll();this.expand();this.moreWelfare();}};$(function(){a.init();});})();