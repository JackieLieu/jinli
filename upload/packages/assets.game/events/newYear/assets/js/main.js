var activity={version:null,init:function(){this.version=this.getVersion();if(this.version=="v1"||this.version=="v2"){var a="http://assets.gionee.com/apps/game/apkv1/assets/js/plugin/cordova-2.0.0.js";
this.getScript(a,activity.bindEvent);}else{activity.bindEvent();}},getScript:function(c,b){var a=document.createElement("script");a.async="async";a.src=c;
if(b){a.onload=b;}document.getElementsByTagName("head")[0].appendChild(a);},bindEvent:function(){var c=document.querySelectorAll("[data-infpage]");for(var b=0,a=c.length;
b<a;b++){c[b].addEventListener("click",function(){var h=this.getAttribute("data-infpage").split(","),d=h.length;if(activity.version==null||!(window.gamehall||navigator.gamehall)){if(d>2){location.href=h[3];
}else{location.href=h[1];}}else{if(activity.version=="v4"){if(h.length>2){var i=JSON.stringify({});var g=window.gamehall.getValue("gamehall.islogin",i);
g=JSON.parse(g);if(g==false){window.gamehall.onEvent("gamehall.finish",i);window.gamehall.onEvent("gamehall.clearlogin",i);window.gamehall.onEvent("gamehall.account",i);
}else{var f=this.getAttribute("data-prize-href");f+="&sp="+activity.getUrlParam("sp")+"&uname="+activity.getUrlParam("uname")+"&puuid="+activity.getUrlParam("puuid");
var e=("积分抽奖,"+f).split(",");activity.openV3Page(e);}}else{activity.openV3Page(h);}}else{activity.openPage(h);}}});}},getUrlParam:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");
var c=window.location.search.substr(1).match(b);if(c!=null){return unescape(c[2]);}return null;},openPage:function(a){switch(this.version){case"v1":activity.openV1Page(a);
break;case"v2":activity.openV2Page(a);break;case"v3":activity.openV3Page(a);break;}},openV1Page:function(c){var b={},a=c.length;if(a==2){b={type:"list",args:{title:c[0],url:c[1]}};
}else{b={type:"detail",args:{title:c[0],url:c[1],gameid:c[2],downurl:c[3],packagename:c[4],filesize:c[5],sdkinfo:c[6],resolution:c[7]}};}activity.startActivity(b);
},openV2Page:function(d){var c={type:"",args:{}},a=d.length;if(a>2){var b={title:"",url:"",gameid:"",downurl:"",packagename:"",filesize:"",sdkinfo:"",resolution:""};
c.args=window.gamehall?{}:b;c.type="detail";c.args.newArgs={title:d[0],url:d[1],gameId:d[2]};}else{c.type="browser";c.args={url:d[1]};}activity.startActivity(c);
},openV3Page:function(f){var d={};d.args={};var b=f.length,e,a,g,c;if(b>2){d.type="detail";a="GameDetailView";g="gltj"+f[2];c=f[4];e=f[2];}else{d.type="list";
a="WebView";}d.args.newArgs={viewType:a,param:{gameId:e,url:a=="WebView"?f[1]:"",title:a=="WebView"?f[0]:"",source:g,packageName:c}};activity.startActivity(d);
},getVersion:function(){var a=activity.getUrlParam("sp");if(a==null){return null;}else{if(a.split("_").length<2||a.split("_")[1]==""){return"v1";}else{var b=a.split("_")[1].split(".");
if(b[0]>1||(b[0]==1&&b[1]>5)||(b[0]==1&&b[1]==5&&b[2]>=5)){return"v4";}if(b[0]>1||(b[0]==1&&b[1]>5)||(b[0]==1&&b[1]==5&&b[2]>=1)){return"v3";}if(b[0]>1||(b[0]==1&&b[1]>4)||(b[0]==1&&b[1]==4&&b[2]>7)){return"v2";
}return"v1";}}},startActivity:function(a){var c=errCal=function(){},b=window.gamehall?window.gamehall:navigator.gamehall;switch(a.type){case"list":b.startlistactivity(c,errCal,JSON.stringify(a.args));
break;case"detail":b.startdetailsactivity(c,errCal,JSON.stringify(a.args));break;case"browser":b.startlocalbrowser(c,errCal,JSON.stringify(a.args));break;
}}};window.onload=function(){activity.init();};