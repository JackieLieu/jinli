<?php class page{private $rows;private $page_num;private $page_size;private $language;private $page_next;private $page_last;private $page_first;private $page_previous;public function __construct($rows,$page_num,$page_size,$language=''){$this->language=$language;$this->rows=intval($rows);$this->page_num=intval($page_num);$this->page_size=intval($page_size);switch($language){case 'en':$this->page_next='Next';$this->page_last='Last';$this->page_first='First';$this->page_previous='Previous';break;case 'zh':$this->page_next='下页';$this->page_last='末页';$this->page_first='首页';$this->page_previous='上页';break;default:$this->page_next='&gt;';$this->page_last='&gt;|';$this->page_first='|&lt;';$this->page_previous='&lt;';}}public function get_pages(){if($this->rows>$this->page_size){return ceil($this->rows/$this->page_size);}else{return 1;}}public function page_list($digit=false,$size=11,$quick=false){$result='';$url=$this->get_url();$pages=$this->get_pages();if($pages>1){$result=$this->first($url).$this->previous($url);if($digit){$half=floor($size/2);$result.=$this->number($url,$pages,$half);}$result.=$this->next($url,$pages).$this->last($url,$pages);if($quick){switch($this->language){case 'en':$result.='<input type="text" id="topage" class="textbox" value="'.$this->page_num.'" onkeydown="if(event.keyCode==13){quicktopage(\''.$url.'\')}"/><input type="button" value="GO" onclick="quicktopage(\''.$url.'\')"/>';break;case 'zh':$result.='<input type="text" id="topage" class="textbox" value="'.$this->page_num.'" onkeydown="if(event.keyCode==13){quicktopage(\''.$url.'\')}"/><input type="button" class="button" value="确定" onclick="quicktopage(\''.$url.'\')"/>';break;default:$result.='<input type="text" id="topage" class="textbox" value="'.$this->page_num.'" onkeydown="if(event.keyCode==13){quicktopage(\''.$url.'\')}"/><input type="button" value="GO" onclick="quicktopage(\''.$url.'\')"/>';}}}return $result;}private function get_url(){$url=$_SERVER['PHP_SELF'];$param=$_SERVER['QUERY_STRING'];if(empty($param))return $url."?page=";$pos=stripos($param,'page=');if($pos===false)return $url."?".$param."&page=";$paramstr='';$paramarr=explode('&',$param);for($i=0;$i<count($paramarr);$i++){if(stripos($paramarr[$i],'page=')===false)$paramstr.=$paramarr[$i].'&';}return $url."?".$paramstr."page=";}private function previous($url){if($this->page_num>1)return '<a href="'.$url.($this->page_num-1).'"><span>'.$this->page_previous.'</span></a>';else return '';}private function next($url,$pages){if($this->page_num<$pages)return '<a href="'.$url.($this->page_num+1).'"><span>'.$this->page_next.'</span></a>';else return '';}private function first($url){if($this->page_num>1)return '<a href="'.$url.'1"><span>'.$this->page_first.'</span></a>';else return '';}private function last($url,$pages){if($this->page_num<$pages)return '<a href="'.$url.$pages.'"><span>'.$this->page_last.'</span></a>';else return '';}private function number($url,$pages,$half){$str='';$page1=$this->page_num-$half;$page2=$this->page_num+$half;if($this->page_num<=$half)$page2+=$half-$this->page_num+1;if($page2>$pages)$page2=$pages;if($page2-$page1<$half*2)$page1=$page2-$half*2;if($page1<1)$page1=1;for($i=$page1;$i<=$page2;$i++){if($i==$this->page_num)$str.=('<span class="active">'.$i.'</span>');else $str.=('<a href="'.$url.$i.'"><span>'.$i.'</span></a>');}return $str;}public function __destruct(){}}?>