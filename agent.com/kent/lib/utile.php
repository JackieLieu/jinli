<?php function get_refer(){return $_SERVER['HTTP_REFERER'];}function get_uri(){return $_SERVER['REQUEST_URI'];}function get_url(){return urlencode($_SERVER['REQUEST_URI']);}function get_performance(){$run_time1=$GLOBALS['run_time'];$run_memory1=$GLOBALS['run_memory'];$run_time2=microtime(true);$run_memory2=memory_get_usage(false);$run_time=round(($run_time2-$run_time1)*1000,2);$run_memory=round(($run_memory2-$run_memory1)/1024/1024,2);return array('usetime'=>$run_time,'usememory'=>$run_memory);}function len($str){if(function_exists('mb_strlen'))return mb_strlen($str,CHARSET);else return strlen($str);}function left($str,$len){if(function_exists('mb_substr'))return mb_substr($str,0,$len,CHARSET);else return substr($str,0,$len);}function right($str,$len){if(function_exists('mb_substr'))return mb_substr($str,-$len,$len,CHARSET);else return substr($str,-$len);}function jump($url,$mode=3){switch($mode){case 1:header("Location:".$url);break;case 2:echo '<meta http-equiv="refresh" content="0;url='.$url.'">';break;case 3:echo '<script language="javascript" type="text/javascript">';echo 'window.document.location.replace("'.$url.'")';echo '</script>';break;}exit();}function mailto($to,$subject,$message){$result=false;$groups=$GLOBALS['ini_email'];if(!is_array($groups))trigger_error('98|variables $ini_email is invalid');$size=count($groups)-1;$index=rand(0,$size);$email=$groups[$index];if(!is_array($email))trigger_error('98|variables $ini_email is invalid');try{$mail=new PHPMailer(true);$mail->IsSMTP();$mail->Port=25;$mail->SMTPAuth=true;$mail->Username=$email['username'];$mail->Password=$email['password'];$mail->Host=$email['smtp'];$mail->FromName=$email['username'];$mail->From=$email['email'];$mail->AddReplyTo($email['email'],$email['username']);unset($email);$mail->AddAddress($to);$mail->Subject=$subject;$mail->WordWrap=80;$mail->Body=$message;$mail->AltBody=strip_tags($message);$mail->IsHTML(true);$result=$mail->Send();$mail=null;}catch(phpmailerException $e){trigger_error('99|'.$e->errorMessage());}return $result;}?>