(function(a){a.extend(a.fn,{slidePic:function(g){var r={slideWrap:".slideWrap",slidePanel:".pic",slideItem:".pic a",handlePanel:".handle",handleItem:".handle>span",circle:false,auto:false,speed:500,circleTime:3000,prev:".prev",next:".next",curHandleCla:"on",isBounce:false},d=a.extend(r,g);var w=a(this),k,e=w.find(d.slideWrap),c=w.find(d.slidePanel),o=w.find(d.slideItem),u=o.length,s=o.width(),v=d.itemWidth||s,h=Math.round(v/4),m=v!=s,f=a(d.handlePanel),j=a(d.handleItem),p=a(d.prev),q=a(d.next);if(!w[0]){return}if(u<=1){f.hide();return}else{if(d.fixCurrent){w.data("curIndex",d.fixCurrent())}else{w.data("curIndex",0)}c.width(s*u);if(m){u=Math.ceil(s*u/v)}var t=c[0].style,n=parseInt(w.data("curIndex"));t.MozTransform=t.webkitTransform="translate3d("+(-n*v)+"px,0,0)";t.msTransform=t.OTransform="translateX("+(-n*v)+"px)";j.removeClass(d.curHandleCla).eq(n).addClass(d.curHandleCla)}p.on("click",function(){var y=w.data("curIndex"),x=parseInt(y)-1;b(x,"right")});q.on("click",function(){var y=w.data("curIndex"),x=parseInt(y)+1;b(x,"left")});if(d.auto||d.circle){l()}c.swipe({swipeStatus:function(y,x,B,C,A,z){if(x=="start"||x=="move"){clearTimeout(k);if(B=="up"||B=="down"){return}i(B,C)}else{if(B=="up"||B=="down"){return}b(parseInt(w.data("curIndex")),B,C);if(d.auto){l()}}},threshold:h,maxTimeThreshold:v,triggerOnTouchEnd:true,allowPageScroll:"vertical"});function l(){k=setTimeout(function(){curIndex=parseInt(w.data("curIndex"))+1;b(curIndex,"left");l()},d.circleTime)}function b(A,z,D,C){var B=c[0].style;if(!C){C=d.speed}if(D){A=D<h?A:(z=="left"?A+1:A-1)}B.MozTransitionDuration=B.msTransitionDuration=B.OTransitionDuration=B.webkitTransitionDuration=B.transitionDuration=C+"ms";if(A>=u){var x=u-1;if(d.circle&&z=="left"){B.MozTransitionDuration=B.msTransitionDuration=B.OTransitionDuration=B.webkitTransitionDuration=B.transitionDuration="1ms";B.MozTransform=B.webkitTransform="translate3d(0px,0,0)";B.msTransform=B.OTransform="translateX(0px)";w.data("curIndex",0);j.removeClass(d.curHandleCla).eq(0).addClass(d.curHandleCla)}else{if(d.isBounce&&z=="left"){B.MozTransform=B.webkitTransform="translate3d("+(-(x*v+v/2))+"px,0,0)";B.msTransform=B.OTransform="translateX("+(-(x*v+v/2))+"px)";setTimeout(function(){B.MozTransform=B.webkitTransform="translate3d("+(-x*v)+"px,0,0)";B.msTransform=B.OTransform="translateX("+(-x*v)+"px)";w.data("curIndex",x);j.removeClass(d.curHandleCla).eq(x).addClass(d.curHandleCla)},d.speed)}else{if(m){var y=c.width()-v;B.MozTransform=B.webkitTransform="translate3d("+(-y)+"px,0,0)";B.msTransform=B.OTransform="translateX("+(-y)+"px)"}else{B.MozTransform=B.webkitTransform="translate3d("+(-x*v)+"px,0,0)";B.msTransform=B.OTransform="translateX("+(-x*v)+"px)"}w.data("curIndex",x);j.removeClass(d.curHandleCla).eq(x).addClass(d.curHandleCla)}}}else{if(A<0){if(d.isBounce&&z=="right"){B.MozTransform=B.webkitTransform="translate3d("+v/2+"px,0,0)";B.msTransform=B.OTransform="translateX("+v/2+"px)";setTimeout(function(){B.MozTransform=B.webkitTransform="translate3d(0px,0,0)";B.msTransform=B.OTransform="translateX(0px)";w.data("curIndex",0);j.removeClass(d.curHandleCla).eq(0).addClass(d.curHandleCla)},d.speed)}else{B.MozTransform=B.webkitTransform="translate3d(0px,0,0)";B.msTransform=B.OTransform="translateX(0px)";w.data("curIndex",0);j.removeClass(d.curHandleCla).eq(0).addClass(d.curHandleCla)}}else{if(m&&A==u-1){var y=c.width()-v;B.MozTransform=B.webkitTransform="translate3d("+(-y)+"px,0,0)";B.msTransform=B.OTransform="translateX("+(-y)+"px)";w.data("curIndex",A);j.removeClass(d.curHandleCla).eq(A).addClass(d.curHandleCla);return false}B.MozTransform=B.webkitTransform="translate3d("+(-A*v)+"px,0,0)";B.msTransform=B.OTransform="translateX("+(-A*v)+"px)";w.data("curIndex",A);j.removeClass(d.curHandleCla).eq(A).addClass(d.curHandleCla)}}}function i(z,C,B){var A=c[0].style,y=w.data("curIndex")||0;if(!B){B=d.speed}if(!d.isBounce&&y==0&&z=="right"||!d.isBounce&&y==u-1&&z=="left"){return}A.MozTransitionDuration=A.msTransitionDuration=A.OTransitionDuration=A.webkitTransitionDuration=A.transitionDuration="";var x=z=="left"?C:-C;A.MozTransform=A.webkitTransform="translate3d("+(-(y*v+x))+"px,0,0)";A.msTransform=A.OTransform="translateX("+(-(y*v+x))+"px)"}}})})(Zepto);
