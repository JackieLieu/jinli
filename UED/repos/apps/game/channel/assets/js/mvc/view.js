(function(a,b){var e={recommend:{curIndex:2,ajaxUrl:""}};GameApk.template={slidePic:'<div><section class="wrap first-grade">			<div class="slide-pic ">			<%if(data.length){%>				<div class="slideWrap">					<div class="pic">					<%for(var i=0, len=data.length; i<len; i++){%>						<a data-infpage="<%=data[i]["data-infpage"]%>" >							<img src="<%=blankPic%>" data-src="<%=data[i].img%>">						</a>						<%}%>					</div>				</div>				<%}%>			</div>		</section>		</div>',recItem:'<div><section class="wrap first-grade">			<div class="channel-list">			<%if(data.length&&data.length>=4){%>				<ul>				<%for(var i=0, len=data.length; i<len; i++){%>					<%if(i>=4){%>					<%}else{%>						<li>							<a data-infpage="<%=data[i]["data-infpage"]%>">								<div class="img-box">									<div class="panel">										<img src="<%=blankPic%>" data-src="<%=data[i].icon%>" alt="">									</div>								</div>								<div class="layer"><%=data[i].title%></div>							</a>						</li>					<%}}%>				</ul>			<%}%>			</div>		</section>		</div>',recommendlist:'<div><section class="wrap first-grade">			<div class="rec3-list clearfix">			<%if(data.list.length){%>				<ul>					<%for(var i=0, len=data.list.length; i<len; i++){%>						<li>						<%if(data.list[i].hot=="最新"){%>							<div class="new"><span><%=data.list[i].hot%></span></div>						<%}else if(data.list[i].hot=="最热"){%>							<div class="hot"><span><%=data.list[i].hot%></span></div>						<%}else if(data.list[i].hot=="首发"){%>							<div class="first"><span><%=data.list[i].hot%></span></div>						<%}else if(data.list[i].hot=="活动"){%>						<div class="event"><span><%=data.list[i].hot%></span></div>						<%}else{%>						<%}%>					<a data-infpage="<%=data.list[i]["data-infpage"]%>">						<span class="icon">						<img src="<%=blankPic%>" data-src="<%=data.list[i].img%>" alt="">						</span>						<span class="desc">						<em><%=data.list[i].name%></em>						<p><em><%=data.list[i].category%></em><em>|</em><em><%=data.list[i].size%></em></p>						<b><%=data.list[i].resume%></b>						</span>						</a>					</li>					<%}%>				</ul>				<%}%>			</div>		</section>		</div>'};var c=typeof t_bi!="undefined"?("t_bi="+t_bi):"",d=0;GameApk.view=a.View.extend({config:{multiChild:true,dataSave:true},blankPic:a.PathConfig.appRef.replace(/assets\/js\//g,"pic/blank.gif")});GameApk.view.setting={slidePic:{config:{tempId:"slidePic",wrap:"#container",ajaxUrl:"/api/Channel_Index/turn",hooks:{"&>1":".J_slidePic"}}},recItem:{config:{tempId:"recItem",ajaxUrl:"/api/Channel_Index/channel",wrap:"#container",hooks:{"&>2":".J_rotate"},callback:function(){GameApk.view.setting.transition();},}},transition:function(){var f=$(".J_rotate");if(!f[0]){return this;}},recommend:{config:{tempId:"recommendlist",ajaxUrl:"api/Channel_Index/recommend",wrap:"#container",callback:function(h,g,f){GameApk.view.setting.loadingData(h,g,f);}},},loadingData:function(i,g,f){var j=g.ajaxUrl;e.recommend.ajaxUrl=j;var k;e.recommend.split=e.recommend.ajaxUrl.indexOf("?")>-1?"&page=":"?page=";if(e.recommend.hasnext===undefined){e.recommend.hasnext=f.data.hasnext;k=f.data.hasnext;if(e.recommend.hasnext){$(i).find(".J_loadMore").remove();var h='<div class="load-more J_loadMore"></div>';$("#container").append(h);$(window).scroll(function(n){var o=document.body.clientHeight,m=document.documentElement.clientHeight,p=document.body.scrollTop;if(Math.abs(o-m)<=p+50){var l=$(".J_loadMore");if(e.recommend.hasnext==true){l.html('<img src="'+GameApk.loadingPic+'" />');}if(e.recommend.hasnext===true){e.recommend.hasnext=false;a.util.ajax({url:e.recommend.ajaxUrl+e.recommend.split+e.recommend.curIndex,success:function(q){if(q.success){q.blankPic=a.PathConfig.appRef.replace(/assets\/js\//g,"pic/blank.gif");g.dataSave=false;setTimeout(function(){a.View[g.viewId].setData(q,false,false);n.preventDefault();if(q.data.hasnext!=true){$("#container").find(".J_loadMore").html('<span class="bottom">到底了，去其它页面看看吧</span>');$(window).unbind("scroll");}e.recommend.curIndex=q.data.curpage+1;e.recommend.hasnext=q.data.hasnext;k=q.data.hasnext;},1000);}},error:function(){e.recommend.hasnext=k;}});}}});}}}};})(ICAT,window);