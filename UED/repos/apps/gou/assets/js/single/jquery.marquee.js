(function(a){a.fn.extend({marquee:function(c){var e=this,h=c.direction||"left",k=c.speed||30,j=a(e),g=a(e).children(0).attr({id:"mp1"}),i=b(h),f=i?setInterval(i,k):function(){return false};e[0].addEventListener("touchstart",function(){clearInterval(f)},false);e[0].addEventListener("touchmove",function(){clearInterval(f)},false);e[0].addEventListener("touchend",function(){f=setInterval(i,k)},false);function b(q){var o;switch(q){case"left":j.addClass("plus-mar-left");var m=j[0].offsetHeight;j.css({"line-height":m+"px"});if(g[0].offsetWidth<j[0].offsetWidth){return false}g.clone().attr({id:"mp2"}).appendTo(j);o=function(){if(j[0].scrollLeft>=g[0].scrollWidth){j[0].scrollLeft=0}else{j[0].scrollLeft++}};break;case"top":j.addClass("plus-mar-top");if(g.outerHeight()<=j.outerHeight()){return false}var l=g.clone().attr({id:"mp2"}).appendTo(j);o=function(){var d=j[0].scrollTop;if(g[0].offsetHeight>d){j[0].scrollTop=d+1}else{j[0].scrollTop=0}};break;case"right":j.addClass("plus-mar-left");var m=j[0].offsetHeight;j.css({"line-height":m+"px"});if(g[0].offsetWidth<=j[0].offsetWidth){return false}var l=g.clone().attr({id:"mp2"}).appendTo(j);o=function(){if(j[0].scrollLeft<=0){j[0].scrollLeft+=l[0].offsetWidth}else{j[0].scrollLeft--}};break;case"bottom":j.addClass("plus-mar-bottom");if(g[0].offsetHeight<=j[0].offsetHeight){return false}var l=g.clone().attr({id:"mp2"}).appendTo(j);j[0].scrollTop=j[0].scrollHeight;o=function(){if(g[0].offsetTop>=j[0].scrollTop){j[0].scrollTop+=g[0].offsetHeight}else{j[0].scrollTop--}};break;case"up":j.addClass("plus-mar-up");var m=j[0].offsetHeight;g.css({"line-height":m+"px"});o=function(){var d=e.eq(0).find("ul:first");d.animate({marginTop:-m},500,function(){d.find("li:first").appendTo(d);d.css({marginTop:0})})};break;case"down":j.addClass("plus-mar-down");var m=j[0].offsetHeight,p=g.children().length,n=-(p-1)*m+"px";g.css({top:n,"line-height":m+"px"});o=function(){var d=e.eq(0).find("ul:last");d.animate({marginTop:m},500,function(){d.find("li:last").prependTo(d);d.css({marginTop:0})})};break;default:o=null;alert("滚动插件：传入的参数{direction}有误！")}return o}}})})(jQuery);