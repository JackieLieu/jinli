(function(b){var P="apk";if(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)){P="ios"}else{if(/(Android)/i.test(navigator.userAgent)){P="apk"}}var L="http://"+P+".gou.gionee.com/",Q="http://assets.gionee.com/apps/gou/assets/";if(T()){L="http://"+P+".gou.3gtest.gionee.com/";Q="http://assets.3gtest.gionee.com/apps/gou/assets/"}function l(e){return e?e.replace(/@/,P+"_"):""}function T(){var af;try{af=document.currentScript.src}catch(ae){var ac=document.scripts;var ad=ac[ac.length-1];af=ad.src}return af&&(af.indexOf("3gtest")>-1)?true:false}function M(e){return document.getElementById(e)}function Y(ac,e){return(e||document).getElementsByClassName(ac)}function S(ac,e){return(e||document).getElementsByTagName(ac)}function U(e){return document.createElement(e)}function d(){return document.createDocumentFragment()}function B(ad){var e,ac={};for(e in ad){ac[e]=ad[e]}return ac}function C(e){var ac=this.className;ac&&((" "+e+" ").indexOf(" "+ac+" ")!=-1)?"":(this.className=ac+" "+e);return this}function t(e){var ac=this.className;this.className=(" "+ac+" ").replace(new RegExp(" "+e+" ")," ").replace(/^\s*|\s*$/g,"");return this}function o(ac,ae){var e=U("script");var ad="jsonpcallback"+Date.now();b[ad]=function(af){ae(af);M("jsonp-script").remove()};ac=ac+(ac.indexOf("?")>-1?"&":"?")+"callback="+ad;e.src=ac;e.id="jsonp-script";S("head")[0].appendChild(e)}function N(e){this.setAttribute("style",e);return this}function c(ad){var e,ac=[];for(var e in ad){ac.push(e+"="+ad[e])}return ac.join("&")}function aa(af){var ac,ad,e,ae={},ag;ag=U("a");ag.href=af;ac=ag.search.replace(/^\?/,"").split("&");for(ad=0,e=ac.length;ad<e;ad++){s=ac[ad].split("=");ae[s[0]]=s[1]}return ae}function w(ag,af){var e={},ad;if(ag==null){return e}if(af instanceof Array){for(var ac=0,ae=af.length;ac<ae;ac++){ad=af[ac];if(ad in ag){e[ad]=ag[ad]}}}return e}function V(ac){var ae=window.share&&window.share.getVersionName&&window.share.getVersionName();if(ae){var ad=ae.split(".");var e=ac.split(".");if(ad[0]*1<e[0]*1){return false}if(ad[0]*1>e[0]*1){return true}if(ad[1]*1<e[1]*1){return false}if(ad[1]*1>e[1]*1){return true}if(ad[2]*1<e[2]*1){return false}if(ad[2]*1>=e[2]*1){return true}}}if(/wao.m.taobao.com\/main\/index/.test(location.href)){var v=document.createElement("a");v.innerHTML="<div>赚钱</div><div>攻略</div>";v.href=L+"jfb";v.setAttribute("style","display: inline-block; width: 60px; height: 60px; position: fixed; top: 60%; left: 8px; color: #ff6633; background: rgba(255,255,255,0.9); z-index: 1000; -webkit-border-radius: 45px; border-radius: 45px; font-size: 16px; text-align: center;  padding-top: 10px; -webkit-box-sizing: border-box;box-sizing: border-box; -webkit-box-shadow: 0px 1px 0px 0px #aaa;box-shadow: 0px 1px 0px 0px #aaa;");document.body.appendChild(v)}if(P==="apk"){try{var h=setTimeout(function(){if(b.share){if(b.share.setmDescription){var e=document.getElementsByTagName("h1");if(e.length){b.share.setmDescription(e[0].innerText)}}}},1500)}catch(Z){}var i={};var K={"jd.com":"\u4eac\u4e1c\u5546\u57ce","tmall.com":"\u5929\u732b","tmall.hk":"\u5929\u732b","taobao.com":"\u6dd8\u5b9d","mmb.cn":"\u4e70\u5356\u5b9d","vip.com":"\u552f\u54c1\u4f1a","meilishuo.com":"\u7f8e\u4e3d\u8bf4","mogujie.com":"\u8611\u83c7\u8857","yhd.com":"\u0031\u53f7\u5e97","zch168.com":"\u4e2d\u5f69\u6c47","meituan.com":"\u7f8e\u56e2\u7f51","aicai.com":"\u7231\u5f69\u7f51","taohwu.com":"\u6843\u82b1\u575e\u5546\u57ce","ytao.cn":"\u79fb\u6dd8\u5546\u57ce","aizhigu.com.cn":"\u7231\u4e4b\u8c37\u5546\u57ce","tieyou.com":"\u94c1\u53cb\u7f51","moonbasa.com":"\u68a6\u82ad\u838e","zg51.net":"\u638c\u8d2d\u65e0\u5fe7","lashou.com":"\u62c9\u624b\u7f51","nuomi.com":"\u767e\u5ea6\u7cef\u7c73\u7f51","ly.com":"\u540c\u7a0b\u7f51","lefeng.com":"\u4e50\u8702\u7f51","mbaobao.com":"\u9ea6\u5305\u5305","paixie.net":"\u62cd\u978b\u7f51","amazon.cn":"\u4e9a\u9a6c\u900a","suning.com":"\u82cf\u5b81\u6613\u8d2d","gome.com.cn":"\u56fd\u7f8e\u5728\u7ebf","qunar.com":"\u53bb\u54ea\u513f\u7f51","dianping.com":"\u5927\u4f17\u70b9\u8bc4","yixiangsc.com":"\u6613\u4eab\u5546\u57ce","tiantian.com":"\u5929\u5929\u7f51","m18.com":"M18","gionee.com":"\u91d1\u7acb","m.vancl.com":"\u51e1\u5ba2","m.dangdang.com":"\u5f53\u5f53\u7f51"};var F=function(){o(L+l("api/@config/index"),function(ar){if(typeof ar!="object"){ar=JSON.parse(ar)}if(ar.success){var ai=ar.data.history;var aj=0,am=ai.length;for(;aj<am;aj++){i[ai[aj].preg]=ai[aj]}var al=Object.keys(i);var ag;var ao,af,ap=document.title;var ad;var ak;var aq=location.host;al.forEach(function(e){var at=new RegExp(e);if(at.test(decodeURIComponent(location.href))){ag=i[e];return false}});var ac=function(at,av,au,e){if(window.share&&window.share.insertUrlHistory){window.share.insertUrlHistory(location.href,av,au,e)}};if(ag){ao=ag.type;af=ag.src;if(ao=="goods"&&new RegExp(ag.preg).test(decodeURIComponent(location.href))){var ae;var ah=setInterval(function(){try{ae=S("h1")[0].innerText;if(ae){clearInterval(ah);ah=null;ac(location.href,ae,ao,af)}}catch(at){}},100);return}}else{ao="others";ad=new RegExp(Object.keys(K).map(function(e){return"("+e+")"}).join("|"));try{ak=aq.match(ad)[0]}catch(an){}af=ak?K[ak]:aq.substring(aq.indexOf(".")+1)}ac(location.href,ap,ao,af)}})};try{F()}catch(Z){}}try{var D=location.href;var m=/.*\.(mmb)\.cn\/|m\.(jd)\.com|sale\.(jd)\.com|m\.(vip)\.com|m\.(dangdang)\.com|m\.(gome)\.com\.cn|m\.(suning)\.com|m\.(kuaidi100)\.com/;var H=function(e){var ad;switch(e){case"mmb":ad=M("top_divs");break;case"jd":localStorage.setItem("downCloseDate",Date.now()+"_259200000");ad=M("index_banner");var ac=M("down_app_header");if(ac&&ac.parentNode){ac.parentNode.removeChild(ac)}break;case"vip":ad=Y("u-download-bar")[0].parentNode;break;case"dangdang":ad=Y("dt_box")[0];var ae=M("app_download");if(ae){ae.parentNode.removeChild(ae)}break;case"gome":ad=M("spt");break;case"suning":ad=Y("top-dload")[0];break;case"kuaidi100":ad=M("container");break}if(ad&&ad.parentNode){ad.parentNode.removeChild(ad)}};var a=D.match(m);if(a){a.forEach(function(ac,e){if(0!==e&&ac){H(ac);return false}})}}catch(Z){}if(b.SameStyle){return}if(P==="apk"){if(!V("2.4.0")){return}}var z=/complete|loaded/,n,f,G=aa(location.href),E,r,X;b.SameStyle={};var u=L+l("api/@same/getunipid"),q=L+l("api/@same/getLower"),y={css:Q+"css/grap.plugin.css"};function ab(){var e=M("J_samePlugin");t.call(e,"fold");C.call(e,"unfold");r=setTimeout(function(){O()},7000)}function O(){var e=M("J_samePlugin");t.call(e,"unfold");C.call(e,"fold")}function J(e,ac){return parseFloat(e).toFixed(ac)}function x(e){var ac;e=String(e);ac=e.indexOf("-");if(ac>-1){e=e.substring(0,ac)}return e}function p(e){var ac,ad;if(e==null||e==""){return""}e=x(e);e=e*1;ad=/\./.test(e);if(e<100){return ad?J(e,2):e}if(e>=100&&e<1000){return ad?J(e,1):e}if(e>=1000&&e<10000){return Math.round(e)}if(e>=10000&&e<1000000){return J(e/10000,1)+"\u4e07"}}function I(ae,ad){var ac,af,e;ac=U("link");ac.type="text/css";ac.rel="stylesheet";ac.href=y.css;S("head")[0].appendChild(ac);af=d();e=U("div");e.id="J_samePlugin";e.className="same-plugin";e.innerHTML='<div class="side"></div><div class="cont">\u540c\u6b3e<span id="J_priceWrap" class="price-wrap"></span></div>';e.addEventListener("touchend",function(ag){ag.stopPropagation();A()},false);af.appendChild(e);document.body.appendChild(af)}function A(){var e="",ac;ac=k(R());if(ac){ac.unipid=f;ac.img=ac.image_urls[0].img;if(ac.channel=="taobao"){ac.score=ac.score?(ac.score+"\u597d\u8bc4"):ac.score}else{if(ac.channel=="tmall"){ac.score=ac.score?(ac.score+"\u5206"):ac.score}}e=w(ac,["id","url","unipid","img","title","price","express","pay_num","score","area","channel"])}if(P==="ios"){if(e){e.url=encodeURIComponent(e.url);e=JSON.stringify(e)}location.href="objc://showSameStyleList/"+e}else{if(e){e=JSON.stringify(e)}b.share&&b.share.showSameStyleList&&b.share.showSameStyleList(e)}}b.SameStyle.addShopToList=function(){var e="",ac;ac=k(R());if(ac){if(ac.channel=="taobao"){ac.channel="\u6dd8\u5b9d";ac.score=ac.score?(ac.score+"\u597d\u8bc4"):ac.score;ac.is_high_light=false}else{if(ac.channel=="tmall"){ac.channel="\u5929\u732b";if(ac.score){ac.is_high_light=(ac.score>=4.8?true:false);ac.score=ac.score+"\u5206"}}}e=JSON.stringify(w(ac,["id","is_high_light","url","image_urls","title","price","express","pay_num","score","area","channel"]))}b.share&&b.share.setContrastData&&b.share.setContrastData(e)};function j(ae,ad,ac){if(!ae||!ad||!ac){return}var e=u+"?id="+ae+"&title="+ad+"&channel="+ac;o(e,function(af){if(af.data){I();f=af.data;g(f)}})}function g(ag){var ah,al,ad,ae,ac,aj=0,ak;E=k(X);if(E){ah=B(E);ah.img=encodeURIComponent(ah.image_urls[0].img);delete ah.image_urls;ah.pid=ag;ah.url=encodeURIComponent(ah.url);ad=q+"?"+c(ah);var ai=3;var af;ad=ad+"&t="+Date.now();(function e(){ai--;o(ad,function(ap){if(ap.data){var am="<em>\uffe5"+p(ap.data)+"</em>\u8d77";ae=M("J_priceWrap");ae.innerHTML=am;ac=U("div");ac.setAttribute("style","display: inline-block; visibility:hidden;");ac.innerHTML=am;document.body.appendChild(ac);wd=ac.getBoundingClientRect().width;ac.parentNode.removeChild(ac);var ao=M("J_samePlugin");ae.style.width=wd+"px";ao.style.marginRight="-"+(wd+2)+"px";if(r){clearTimeout(r)}b.onscroll=function(){if(window.scrollY>screen.availHeight){O()}};var an=setTimeout(function(){ab();clearTimeout(an);an=null},600)}else{if(ai>0){af=setTimeout(function(){e();clearTimeout(af)},500)}}})}())}}function k(ac){if(!ac){return}var ad;switch(ac){case"taobao":var e=Y("dt-shop")[0];var ae=S("b",e)[0].className;ad={id:G.id,channel:ac,shop_level:ae.match(/c-icon-lw(\d)/)[1],level_icon:ae.match(/c-icon-b(\d)/)[1],title:S("h1")[0].innerText,shop_title:S("h2",e)[0].innerText,price:(function(){var af=S("ins",M("item-price-line"))[0].innerText.substring(1);return af.indexOf("-")>-1?af.substring(0,af.indexOf("-")):af}()),image_urls:(function(){var ai,ag=[],ah=0,af;ai=S("img",Y("dt-slct-ul")[0]);af=ai.length;for(;ah<af;ah++){if(ai[ah].className==""){ag.push({img:ai[ah].src})}}return ag}()),url:location.href,create_time:"",pay_num:Y("dtifp-m")[0].innerText.match(/\d+/)[0],score:Y("orange",Y("dtspu-r")[0])[0].innerText,comment_num:"",area:Y("dtifp-r")[0].innerText,express:(function(){var af=Y("dtifp-l")[0].innerText||"";return af&&af=="\u5356\u5bb6\u5305\u90ae"?"\u5305\u90ae":af}())};break;case"tmall":ad={id:G.id,channel:ac,shop_level:"",level_icon:"",title:S("h1")[0].innerText,shop_title:Y("shop",M("s-shop"))[0].innerText,price:(function(){var af=Y("ui-yen",M("s-price"))[0].innerText.substring(1);return af.indexOf("-")>-1?af.substring(0,af.indexOf("-")):af}()),image_urls:[{img:S("img",Y("main",M("s-showcase"))[0])[0].src}],url:location.href,create_time:"",pay_num:Y("v",Y("sales")[0])[0].innerText,score:(function(){var ah=0,af,ag,ai=0;ag=S("b",Y("score",M("s-shop"))[0]);af=ag.length;if(af){for(;ah<af;ah++){ai+=ag[ah].innerText*1}return parseFloat(ai/af).toPrecision(2)}else{return""}}()),comment_num:(function(){var af=Y("review",M("s-header"))[0];var ag=S("b",af);return ag.length?ag[0].innerText:""}()),area:Y("from",M("s-adds"))[0].innerText,express:""};break;case"jd":break}return ad}function R(){var e=location.host;var ac=location.pathname;if(e.indexOf("taobao.com")>-1&&(ac.indexOf("/awp/core/detail.htm")>-1||ac.indexOf("/item.htm")>-1)){return X="taobao"}else{if(e.indexOf("tmall.com")>-1&&ac.indexOf("/item.htm")>-1){return X="tmall"}}}(function W(){var ac,ad,e=true;if(ac=R()){n=setInterval(function(){if(e){try{ad=S("h1")[0].innerText}catch(ae){}if(ad){e=false;j(G.id,ad,ac);clearInterval(n);n=null}}},50)}}())})(window);