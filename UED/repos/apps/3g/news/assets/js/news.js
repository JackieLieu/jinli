(function(a){a.PathConfig();a.PathConfig._isConcat=false;a.app("GNnews",function(){return{version:"1.1"};});a.include(["lib/zepto/zepto.js"],function(){GNnews.init();
});a.mix(GNnews,{init:function(){setTimeout(function(){GNnews.fetchData();GNnews.slider();GNnews.baiduHots();},1500);$(".news-tab").delegate("li","click",function(b){var g=$(this),f,h,e=g.data("part"),d=g.data("num"),c=g.data("remote");
f=$("#J_news_tab_item"+e+" ul");h=f.eq(d);g.parent().children().removeClass("sel");g.addClass("sel");f.addClass("ishide");h.removeClass("ishide");if(h.hasClass("done")){return;
}GNnews.getNews(c,h);});},cache:function(){if(arguments[1]==undefined){return window.localStorage.getItem(arguments[0]);}return window.localStorage.setItem(arguments[0],arguments[1]);
},baiduHots:function(){var b=$("#api-baidu-hots").val();$.getJSON(b,function(c){$(".inp-search").val(c.data.top1);$(".in-hot-world").html(c.data.keywords);
$(".btn-search").on("click",function(){var e=$(this),d=c.data.top1;if($(".inp-search").val()==d){_hmt.push(["_trackEvent","GNnews数据","GNnews-搜索框点击","GNnews-默认关键字搜索"]);
}else{_hmt.push(["_trackEvent","GNnews数据","GNnews-搜索框点击","GNnews-主动关键字搜索"]);}});});},fetchData:function(){if(!$(".news-tab-item")){return;}var g=$(".news-tab-item"),d,e,c=$(".news-tab");
var b=$("#initNewsData").val();var f=b.slice(b.indexOf("ids=")+4).split(",");if(f){$.getJSON(b,function(h){if(h.success){var i='<a href="'+h.data[0][1].list.data[0].url+'">'+h.data[0][1].list.data[0].title+"</a>";
$(".news-hot-title").html(i);$.each(c,function(l,o){e=$(o).children().first().data("part");var m=$("#J_news_tab_item"+l+" ul").first();var n=h.data[l+1][1].list.data,j=[],k;
m.addClass("done").html("");$.each(n,function(p,q){if(q.color==""){k='<li class="item"><a href="'+q.url+'">'+q.title+"</a></li>";}else{k='<li class="item"><a href="'+q.url+'" style="color:'+q.color+'">'+q.title+"</a></li>";
}j.push(k);});if(h.data[l+1][1].moreUrl){j.push('<li class="item list-more"><a href="'+h.data[l+1][1].moreUrl+'">更多资讯</a></li>');}m.append(j.join(""));
});}});}},getNews:function(c,d,b){$.ajax({type:"GET",url:c,dataType:"json",success:function(g){if(g.success){d.addClass("done").html("");var h=g.data[0][1].list.data,e=[],f;
$.each(h,function(i,j){if(j.color==""){f='<li class="item"><a href="'+j.url+'">'+j.title+"</a></li>";}else{f='<li class="item"><a href="'+j.url+'" style="color:'+j.color+'">'+j.title+"</a></li>";
}e.push(f);});if(g.data[0][1].moreUrl&&b==undefined){e.push('<li class="item list-more"><a href="'+g.data[0][1].moreUrl+'">更多资讯</a></li>');}d.append(e.join(""));
}}});},slider:function(){if(!$("#J_full_slider")){return;}var e=$("#J_full_slider"),d=false,b=e.data("ajaxurl");$.ajax({type:"GET",url:b,dataType:"json",timeout:3000,success:function(f){c(f.data);
GNnews.cache("news_top_ads",JSON.stringify(f.data));},error:function(i,g,f){var h=JSON.parse(GNnews.cache("news_top_ads"));c(h);}});function c(k){var p="",f="",g="",l=0,m=k.length;
for(;l<m;l++){p=p+'<li><a href="'+k[l].link+'"><img src="'+k[l].img+'" ></a><a href="'+k[l].link+'"><span>'+k[l].title+"</span></a></li>";f=f+(l==0?'<span class="on"></span> ':"<span></span> ");
}g='<div class="ui-slider-wrap">							<div class="ui-slider-content">						 		<ul class="ui-slider-pic ui-slider-text">						 			'+p+'						 		</ul>						 	</div>						 	<div class="ui-slider-handle ui-slider-handle-circle">								'+f+"							</div>						</div>";
$("#J_full_slider").append(g);var j=e.find(".ui-slider-content"),r=j.find("li"),n=r.length,q=e.find(".ui-slider-handle span"),o=function(i){if(i==n){i=0;
j.animate({left:0},0);}else{j.animate({left:(-r.width()*i)+"px"},500);}q.removeClass("on").eq(i).addClass("on");e.attr("curIndex",i);},h=function(i){var s=setTimeout(function(){if(i){j.width(r.width()*n);
}var t=(parseInt(e.attr("curIndex"))||0)+1;o(t);h();},8000);};h(true);}},});})(ICAT);