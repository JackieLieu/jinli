/*! nav 2015-06-25 */
!function(){function a(){var a=b();return $(".zz-random").html(a[0]),$(".zz-animate").html(a[1]),1==__CONFIG__.pz_ep?(r="<p>本期活动已结束<br/>下期活动再来吧！</p>",$(".part1 .tips").html(r),void $(".btn-over").show()):(__CONFIG__.pz_rm>0?$(".btn-start").show():$(".btn-over").show(),void(__CONFIG__.pz_rk>0&&5!=__CONFIG__.pz_rk&&(s='<img src="'+h+"apps/3g/events/pic/jp_0"+__CONFIG__.pz_rk+'.png" />',u="<h3>您的奖品"+__CONFIG__.pz_tt+"<br/>未领取成功，是否继续领取？</h3>",r="",t='<span id="J_btn_quit" class="btn btn-blue">放弃奖品</span><span id="J_btn_go" data-url="'+__CONFIG__.pz_ur+'" class="btn btn-yellow">马上领取</span>',c({ptit:u,pimg:s,ptxt:r,pbtn:t}))))}function b(){var a,b,c=[];return a=Math.ceil(6*Math.random()),b=Math.ceil(6*Math.random()),a==b&&(a=2,b=5),c[0]='<i class="zz0'+a+'" data-id="'+a+'"></i>',c[1]='<i class="zz0'+b+'" data-id="'+b+'"></i>',c}function c(a){$(".mask").show(),$("#J_popPrizeBox .dialog-wrap").html('            <div class="dialog-main">                <div class="dialog-txt">                    '+a.pimg+"                    "+a.ptit+"                    "+a.ptxt+'                </div>            </div>            <div class="btn-wrap">                '+a.pbtn+"            </div>        "),$("#J_popPrizeBox").show()}function d(){$("#J_netErrorTips").show(),setTimeout(function(){$("#J_netErrorTips").hide()},3e3)}function e(a){g=setInterval(function(){l++,l>6&&(l=1),$(".zz-animate i").attr("class","zz0"+l).data("id",l)},a)}function f(a){$.get("/datac",a,function(a){})}var g,h,i="touchstart"in window?"tap":"click",j=!1,k=!1,l=1,m=null,n=null,o=!1,p="/event/duanwu/do",q=1,r="",s="",t="",u="";h=location.href.indexOf("3gtest.gionee.com")>-1?"http://assets.3gtest.gionee.com/":location.href.indexOf("3g.gionee.com")>-1?"http://assets.gionee.com/":"http://dev.assets.gionee.com/",a(),$("#J_btnRule").on(i,function(){$(this).hasClass("done")||(f({et:"duanwu",ea:"click",en:"活动规则-查看",ev:""}),$(this).addClass("done"),$("#J_popRuleBox").show(),$(".mask").show())}),$("#J_popRuleBox .btn").on(i,function(){f({et:"duanwu",ea:"click",en:"活动规则-我知道了",ev:""}),$("#J_btnRule").removeClass("done"),$("#J_popRuleBox").hide(),$(".mask").hide()}),$(".btn-start").on(i,function(){var a=b();k||(f({et:"duanwu",ea:"click",en:"开始",ev:""}),k=!0,j=!1,o===!0?($(".btn-start").hide(),$(".btn-over").show()):$.ajax({url:p,type:"get",dataType:"json",data:{act:"start"},success:function(b){q>1&&($(".zz-random").html(a[0]),$(".zz-animate").html(a[1])),q++,b.success&&(0==b.data.pr_rm&&(o=!0),m=b,$(".part1 .tips strong").text(b.data.pz_rm),$(".btn-start").hide(),$(".btn-stop").show(),e(250))},error:function(){k=!1,d()}}))}),$(".btn-stop").on(i,function(){var a=$(".zz-random i").data("id"),b=$(".zz-animate i").data("id");j||(f({et:"duanwu",ea:"click",en:"停止",ev:""}),j=!0,k=!1,clearInterval(g),console.log(a,b),$.ajax({url:p,type:"get",dataType:"json",data:{act:"stop",pz_id:a==b?1:0},success:function(d){d.success&&(n=d,m.data.pz_rm>0?($(".btn-start").show(),$(".btn-stop").hide(),a==b?(r="<p>今天还有"+m.data.pz_rm+"次机会，领取奖品后再来继续玩儿吧！</p>",s='<img src="'+h+"apps/3g/events/pic/jp_0"+d.data.pz_rk+'.png" />',u="<h3>恭喜您！<br/>中了"+d.data.pz_tt+"</h3>",t='<span id="J_btn_quit" class="btn btn-blue">放弃奖品</span><span id="J_btn_go" data-url="'+d.data.pz_ur+'" class="btn btn-yellow">马上领取</span>',c({ptit:u,pimg:s,ptxt:r,pbtn:t})):(r="匹配失败>.<<br/>加油，还有"+m.data.pz_rm+"次机会，拼了！",s="",u="",t='<span id="J_btn_cancel" class="btn btn-blue">不玩了</span><span id="J_btn_again" class="btn btn-yellow">再玩一次</span>',c({ptit:u,pimg:s,ptxt:r,pbtn:t}))):($(".btn-over").show(),$(".btn-start").hide(),$(".btn-stop").hide(),a==b?(r="<p>今天的参与次数已用完，现在去领奖吧！</p>",s='<img src="'+h+"apps/3g/events/pic/jp_0"+d.data.pz_rk+'.png" />',u="<h3>恭喜您！<br/>中了"+d.data.pz_tt+"</h3>",t='<span id="J_btn_quit" class="btn btn-blue">放弃奖品</span><span id="J_btn_go" data-url="'+d.data.pz_ur+'" class="btn btn-yellow">马上领取</span>',c({ptit:u,pimg:s,ptxt:r,pbtn:t})):(r="匹配失败>.<<br/>今天的参与次数已用完！明天再试",s="",u="",t='<span id="J_btn_ok" class="btn btn-yellow">我知道了</span>',c({ptit:u,pimg:s,ptxt:r,pbtn:t}))))},error:function(){j=!1,k=!1,d()}}))}),$("#J_btn_again").live(i,function(){f({et:"duanwu",ea:"click",en:"再玩一次",ev:""}),$(".btn-start").trigger(i),$("#J_popPrizeBox").hide(),$(".mask").hide()}),$("#J_btn_quit").live(i,function(){var a=__CONFIG__.pz_rk>0?__CONFIG__.pz_ur:n.data.pz_ur;f({et:"duanwu",ea:"click",en:"放弃奖品",ev:""}),$("#J_popPrizeBox .dialog-txt p").html("确定放弃？放弃后奖品不再补发哦！"),$("#J_popPrizeBox .btn-wrap").html('<span id="J_btn_fanqi" class="btn btn-red">确定放弃</span><span id="J_btn_go" data-url="'+a+'" class="btn btn-yellow">马上领取</span>')}),$("#J_btn_fanqi").live(i,function(){f({et:"duanwu",ea:"click",en:"确认放弃",ev:""}),$.ajax({url:p,type:"get",dataType:"json",data:{act:"give_up"},success:function(a){a.success&&($("#J_popPrizeBox").hide(),$(".mask").hide(),0==m.data.pz_rm&&($(".btn-over").show(),$(".btn-start").hide()))},error:function(){d()}})}),$("#J_btn_go").live(i,function(a){f({et:"duanwu",ea:"click",en:"领取奖品",ev:""}),a.preventDefault(),$("#J_popPrizeBox").hide(),$(".mask").hide(),location.href=$(this).data("url")+($(this).data("url").indexOf("?")>-1?"&":"?")+"tmp="+ +new Date}),$("#J_btn_ok").live(i,function(){f({et:"duanwu",ea:"click",en:"我知道了",ev:""}),$("#J_popPrizeBox").hide(),$(".mask").hide()}),$("#J_btn_cancel").live(i,function(){f({et:"duanwu",ea:"click",en:"我不玩了",ev:""}),$("#J_popPrizeBox").hide(),$(".mask").hide()})}(Zepto);