define("browser",["zepto"],function(c){var b=navigator.userAgent.toLowerCase();var a={isWeixinBrowser:function(){return/micromessenger/.test(b)?true:false}};return a});define("carousel",["zepto"],function(b){var a=function(c){b(c).each(function(){var n,l,g,h,j,d=0,o,e;n=b(this).find(".carousel");l=b(this).find(".carousel-indicators");g=n.find("img");h=g.length;d=0;if(!h){return}e=l.find("li");n.width(100*h+"%");var k=function(p){n[0].style.marginLeft="-"+100*p+"%";e.eq(p).addClass("active").siblings().removeClass("active")};var f=function(){if(d>=h){d=0}k(d);d++};var i=function(){j=setInterval(f,5000)};var m=function(p){k(p);i()};g.swipeLeft(function(){clearInterval(j);d++;if(d>=h){d=h-1}m(d)});g.swipeRight(function(){clearInterval(j);d--;if(d<=0){d=0}m(d)});m(0)})};return{render:a}});define("lazyload",["zepto"],function(b){var d,c;c=function(){var h=window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,g=h+(window.innerHeight?window.innerHeight:document.documentElement.clientHeight),f=b('img[src$="blank.gif"]'),e=b('img[src$="pic_imgDefault.png"]'),i;i=b(f.concat(e));if(!i.length){return}i.each(function(){var j,n,m,l,k;j=b(this);n=j.attr("data-src");m=j[0].getBoundingClientRect();l=m.top+document.body.scrollTop+document.documentElement.scrollTop;k=l+j.height();if((l>h&&l<g)||(k>h&&k<g)){if(n!=null){j.attr("src",n);j.removeAttr("data-src")}}})};var a=function(){if(e){clearTimeout()}var e=setTimeout(function(){c()},700)};b(window).scroll(a);b(".iScroll").scroll(a);c();return{init:c}});define("mvc",["zepto","underscore","backbone","scroll","util","lazyload"],function(f,d,g,b,c,a){var e=function(p){var l;var j;var k;var m;var n;var i;var o;var h;if(!p){return}if(!f.isPlainObject(p)){return}if(!p.el||!p.templateId){return}l=p.templateData||{};k=g.Model.extend({});m=g.Collection.extend({model:k,parse:function(q){if(!f.isPlainObject(q)){q=JSON.parse(q)}if(q.success){if(p.parse){return p.parse(q)}return q.data}}});i=g.View.extend({el:f(p.el),template:d.template(f(p.templateId).html()),render:function(){f(this.el).append(this.template(this.model.toJSON()));if(p.lazyload){a.init()}return this},initialize:function(){this.render();this.listenTo(this.model,"change",this.render);return this},events:p.events||""});n=new m();n.on("add",function(r){var q=new i({model:r})});if(!p.url){n.add(l);return}if(p.scroll){b.init({collection:n,view:i,url:p.url,});return}n.fetch({url:p.url})};return{render:e}});define("scroll",["zepto","util"],function(c,a){var d;var b;var g;var f;var e=function(j){var o=j.collection;var i=j.url;var m;var h;var l=function(p){o.fetch({url:p.url,success:function(r,q){p.callback(q)}})};var k=function(q,p){c(window).scroll(function(){var r=c(this);d=r.scrollTop();b=c(document).height();g=r.height();if(d+g>=b){if(f){clearTimeout(f)}f=setTimeout(function(){n()},200)}})};var n=function(){if(!h){a.showTip("没有更多了");return}i=i.replace(/[\?\&]page=(\d+)/,"");i=i+(i.indexOf("?")<0?"?":"&")+"page="+(m*1+1);l({url:i,callback:function(p){if(p.success){m=p.data.curpage;h=p.data.hasnext;if(h){a.showTip("努力加载中...")}else{a.showTip("没有更多了")}}}})};l({url:j.url,callback:function(p){if(p.success){m=p.data.curpage;h=p.data.hasnext;k()}}})};return{init:e}});define("shareToSns",["zepto"],function(e){var d=e("body"),c={weibo:"http://v.t.sina.com.cn/share/share.php",qq:"http://connect.qq.com/widget/shareqq/index.html",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},b,a;d.on("click",".J_shareToWeibo, .J_shareToQQ, .J_shareToQzone",function(k){k.stopPropagation();var j=e(this);var i=e(this).parent();var h=j.attr("data-type");var f;var l={url:encodeURIComponent(i.attr("share-url")||""),pic:i.attr("share-pic")||"",title:i.attr("share-title")||""};if(b){var g=e.isFunction(b)?b.call(j):b;e.extend(l,g)}if(h==="qzone"){l.pics=l.pic;delete l.pic}f=c[h]+"?"+e.param(l);window.open(f)});a=function(f){b=f};return{setOptions:a}});define("util",["zepto"],function(e){var c=function(h){var f=e("body"),g=f.find(".J_msgTip");if(g[0]){g.html(h);g.parent().show()}else{f.append('<div class="msg-tip"><span class="J_msgTip">'+h+"</span></div>");g=f.find(".J_msgTip")}setTimeout(function(){g.parent().hide()},3000)};var b=function(){var f=e(".gotop");if(f[0]){f.on("tap","span",function(g){window.scrollTo(0,1);g.stopPropagation()});e(window).scroll(function(){if(document.body.scrollTop<200){f.animate({opacity:0},400,"ease-out",function(){f[0].style.display="none"})}else{f[0].style.display="block";f.animate({opacity:1},400,"ease-in")}})}};var a=function(f){require(["http://res.wx.qq.com/open/js/jweixin-1.0.0.js"],function(i){var g=location.href.replace(location.hash,"");var h=function(j){i.config({appId:j.appId,timestamp:j.timestamp,nonceStr:j.nonceStr,signature:j.signature,jsApiList:j.jsApiList});if(f&&e.isFunction(f)){f(i)}};e.ajax({type:"GET",dataType:"jsonp",url:"http://findjoy.cn/api/weixin/jsparams?callback=jsoncallback&pageUrl="+g,success:function(j){if(j.success){h(j.data)}}})})};var d=function(f){a(f)};return{showTip:c,goTop:b,loadWeixinSdk:a,previewImage:d}});define("brandIntro",["zepto","mvc","util","lazyload"],function(c,d,b,a){d.render({el:"#J_listWrap",templateId:"#J_template",scroll:true,lazyload:true,url:c("#J_listWrap").attr("data-ajaxUrl")});b.goTop()});define("goodsDetail",["zepto","carousel","lazyload","util"],function(c,d,a,b){d.render(c("#J_carouselWrap"));b.goTop()});define("goodsList",["zepto","mvc","util","lazyload"],function(c,d,b,a){d.render({el:"#J_listWrap",templateId:"#J_template",scroll:true,lazyload:true,url:c("#J_listWrap").attr("data-ajaxUrl"),parse:function(e){if(e.success){if(e.data.list.length){return e.data}else{c(".module").append(c("#J_noResultTemplate").html())}}}});b.goTop()});define("index",["zepto","carousel","util","lazyload"],function(c,d,b,a){d.render(c("#J_carouselWrap"));b.goTop()});define("infoDetail",["lazyload","shareToSns","zepto","util","backbone","underscore","browser"],function(a,l,e,j,m,n,i){var c=m.Model.extend({defaults:{type:""}});var h=new c();var p=m.View.extend({model:h,el:"#J_templateWrap",template:n.template(e("#J_attentionTemplate").html()),render:function(){this.$el.html(this.template(this.model.attributes));return this}});var o=function(){var u=e(this);var q={};var t=e("article");var r=location.href;var s=u.attr("data-type");q.pic=t.find("img").first().attr("src")||"";q.url=r+(r.indexOf("?")==-1?"?":"&")+"from="+s;if(s=="qzone"){q.title=t.find("h1").text()}return q};var b=function(q){h.set({type:q});new p().render()};var g=location.search.match(/from=(weibo|qzone|weixin)/);if(g==null){if(i.isWeixinBrowser()){b("weixin")}}else{var k=g[1];b(k)}l.setOptions(o);var d=e(".mixed-map-and-text");var f=d.find("img");if(f.length){if(i.isWeixinBrowser()){j.previewImage(function(q){var s=f[0].src;var r=f.slice(1).map(function(t,u){return u.src});d.on("tap","img",function(){q.previewImage({current:s,urls:r})})})}else{f.each(function(q,r){if(r.parentNode&&r.parentNode.tagName!="A"){e(r).wrap('<a target="_blank" href="'+r.src+'"></a>')}})}}});define("storyList",["zepto","underscore","backbone","carousel","scroll","mvc","util","lazyload"],function(e,d,h,g,b,f,c,a){f.render({el:"#J_listWrap",templateId:"#J_template",lazyload:true,url:e("#J_listWrap").attr("data-ajaxUrl"),scroll:true});c.goTop()});(function(c){var m=function(){var s=c.document,n=s.documentElement,o=320,q=540,p=320,t,r=function(){o=n.getBoundingClientRect().width;o=o>q?q:(o<p?p:o);n.style.fontSize=o/16+"px"};c.addEventListener("resize",function(){if(t){clearTimeout(t)}t=setTimeout(function(){r()},0)},false);r()};var j=function(){var n;var o;n=navigator.userAgent;if(/ucbrowser/i.test(n)){o=navigator.control||{};if(o.gesture){o.gesture(false)}}};var g=function(q,o,n){try{if(!_hmt||!q||!o){return}n=n||"";_hmt.push(["_trackEvent",q,o,n])}catch(p){}};var h=function(){var n=document.createElement("script");n.src="http://192.168.115.23:8080/target/target-script-min.js#anonymous";document.head.appendChild(n)};var k=function(){var n=document.body.id;if(n){require(n.split("|"))}};var e=$("#J_header");var l=e.height();var b="-"+l+"px";var d=$("#J_scrollWrap");var a;var f=function(){e.animate({"margin-top":0},300,"ease-out")};var i=function(){e.animate({"margin-top":b},300,"ease-out")};d[0].addEventListener("touchstart",function(){f();if(a){a=clearTimeout(a)}a=setTimeout(function(){if(d.scrollTop()>0){i()}},3000)},false);m();j();c.baiduStatic=g;k()})(this);